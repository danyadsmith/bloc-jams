var currentAlbum=null,currentlyPlayingSongNumber=null,currentSongFromAlbum=null,$previousButton=$(".main-controls .previous"),$nextButton=$(".main-controls .next"),albumList=[albumPicasso,albumMarconi,albumPurpleRain],counter=0,playButtonTemplate="<a class='album-song-button'><span class='ion-play'></span></a>",pauseButtonTemplate="<a class='album-song-button'><span class='ion-pause'></span></a>",playerBarPlayButton="<span class='ion-play'></span>",playerBarPauseButton="<span class='ion-pause'></span>",createSongRow=function(n,t,r){var e="<tr class='album-view-song-item'>  <td class='song-item-number' data-song-number='"+n+"'>"+n+"</td>  <td class='song-item-title'>"+t+"</td>  <td class='song-item-duration'>"+r+"</td></tr>",u=$(e),l=function(){var n=$(this).attr("data-song-number");if(null!==currentlyPlayingSongNumber){var t=$(".song-item-number[data-song-number='"+currentlyPlayingSongNumber+"']");t.html(currentlyPlayingSongNumber)}currentlyPlayingSongNumber!==n?($(this).html(pauseButtonTemplate),currentlyPlayingSongNumber=n,currentSongFromAlbum=currentAlbum.songs[n-1],updatePlayerBarSong()):currentlyPlayingSongNumber===n&&($(this).html(playButtonTemplate),currentlyPlayingSongNumber=null,currentSongFromAlbum=null),currentSongFromAlbum=currentAlbum.songs[currentlyPlayingSongNumber-1],$(".currently-playing .song-name").text(currentSongFromAlbum.title),$(".currently-playing .artist-name").text(currentSongFromAlbum.artist),$(".currently-playing .artist-song-mobile").text(currentSongFromAlbum.title+" - "+currentAlbum.title),$(".main-controls .play-pause").html(playerBarPauseButton)},a=function(n){var t=$(this).find(".song-item-number"),r=t.attr("data-song-number");r!==currentlyPlayingSongNumber&&t.html(playButtonTemplate)},o=function(n){var t=$(this).find(".song-item-number"),r=t.attr("data-song-number");r!==currentlyPlayingSongNumber&&t.html(r)};return u.find(".song-item-number").click(l),u.hover(a,o),u},setCurrentAlbum=function(n){currentAlbum=n;var t=$(".album-view-title"),r=$(".album-view-artist"),e=$(".album-view-release-info"),u=$(".album-cover-art"),l=$(".album-view-song-list");t.text(n.title),r.text(n.artist),e.text(n.year+" "+n.label),u.attr("src",n.albumArtUrl),l.empty();for(var a=0;a<n.songs.length;a++){var o=createSongRow(a+1,n.songs[a].title,n.songs[a].duration);l.append(o)}},updatePlayerBarSong=function(){$(".main-controls .play-pause").html(playerBarPauseButton)},trackIndex=function(n,t){return n.songs.indexOf(t)},nextSong=function(){var n=function(n){return 0===n?currentAlbum.songs.length:n},t=trackIndex(currentAlbum,currentSongFromAlbum);t++,t>=currentAlbum.songs.length&&(t=0),currentlyPlayingSongNumber=t+1,currentSongFromAlbum=currentAlbum.songs[t],$(".currently-playing .song-name").text(currentSongFromAlbum.title),$(".currently-playing .artist-name").text(currentSongFromAlbum.artist),$(".currently-playing .artist-song-mobile").text(currentSongFromAlbum.title+" - "+currentAlbum.title),$(".main-controls .play-pause").html(playerBarPauseButton);var r=n(t),e=$(".song-item-number[data-song-number='"+currentlyPlayingSongNumber+"']"),u=$(".song-item-number[data-song-number='"+r+"']");e.html(pauseButtonTemplate),u.html(r)},previousSong=function(){var n=function(n){return n==currentAlbum.songs.length-1?1:n+2},t=trackIndex(currentAlbum,currentSongFromAlbum);t--,t<0&&(t=currentAlbum.songs.length-1),currentlyPlayingSongNumber=t+1,currentSongFromAlbum=currentAlbum.songs[t],$(".currently-playing .song-name").text(currentSongFromAlbum.title),$(".currently-playing .artist-name").text(currentSongFromAlbum.artist),$(".currently-playing .artist-song-mobile").text(currentSongFromAlbum.title+" - "+currentAlbum.title),$(".main-controls .play-pause").html(playerBarPauseButton);var r=n(t),e=$(".song-item-number[data-song-number='"+currentlyPlayingSongNumber+"']"),u=$(".song-item-number[data-song-number='"+r+"']");e.html(pauseButtonTemplate),u.html(r)};$(document).ready(function(){setCurrentAlbum(albumPicasso),$previousButton.click(previousSong),$nextButton.click(nextSong),albumCover=document.getElementById("album-cover")});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsYnVtLmpzIl0sIm5hbWVzIjpbImN1cnJlbnRBbGJ1bSIsImN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyIiwiY3VycmVudFNvbmdGcm9tQWxidW0iLCIkcHJldmlvdXNCdXR0b24iLCIkIiwiJG5leHRCdXR0b24iLCJhbGJ1bUxpc3QiLCJhbGJ1bVBpY2Fzc28iLCJhbGJ1bU1hcmNvbmkiLCJhbGJ1bVB1cnBsZVJhaW4iLCJjb3VudGVyIiwicGxheUJ1dHRvblRlbXBsYXRlIiwicGF1c2VCdXR0b25UZW1wbGF0ZSIsInBsYXllckJhclBsYXlCdXR0b24iLCJwbGF5ZXJCYXJQYXVzZUJ1dHRvbiIsImNyZWF0ZVNvbmdSb3ciLCJzb25nTnVtYmVyIiwic29uZ05hbWUiLCJzb25nTGVuZ3RoIiwidGVtcGxhdGUiLCIkcm93IiwiY2xpY2tIYW5kbGVyIiwidGhpcyIsImF0dHIiLCJjdXJyZW50bHlQbGF5aW5nQ29udGFpbmVyIiwiaHRtbCIsInNvbmdzIiwidXBkYXRlUGxheWVyQmFyU29uZyIsInRleHQiLCJ0aXRsZSIsImFydGlzdCIsIm9uSG92ZXIiLCJldmVudCIsInNvbmdOdW1iZXJDb250YWluZXIiLCJmaW5kIiwib2ZmSG92ZXIiLCJjbGljayIsImhvdmVyIiwic2V0Q3VycmVudEFsYnVtIiwiYWxidW0iLCIkYWxidW1UaXRsZSIsIiRhbGJ1bUFydGlzdCIsIiRhbGJ1bVJlbGVhc2VJbmZvIiwiJGFsYnVtSW1hZ2UiLCIkYWxidW1Tb25nTGlzdCIsInllYXIiLCJsYWJlbCIsImFsYnVtQXJ0VXJsIiwiZW1wdHkiLCJpIiwibGVuZ3RoIiwiJG5ld1JvdyIsImR1cmF0aW9uIiwiYXBwZW5kIiwidHJhY2tJbmRleCIsInNvbmciLCJpbmRleE9mIiwibmV4dFNvbmciLCJnZXRMYXN0U29uZ051bWJlciIsImluZGV4IiwiY3VycmVudFNvbmdJbmRleCIsImxhc3RTb25nTnVtYmVyIiwiJG5leHRTb25nTnVtYmVyQ2VsbCIsIiRsYXN0U29uZ051bWJlckNlbGwiLCJwcmV2aW91c1NvbmciLCIkcHJldmlvdXNTb25nTnVtYmVyQ2VsbCIsImRvY3VtZW50IiwicmVhZHkiLCJhbGJ1bUNvdmVyIiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJBQUVBLEdBQUlBLGNBQWUsS0FDZkMsMkJBQTZCLEtBQzdCQyxxQkFBdUIsS0FFdkJDLGdCQUFrQkMsRUFBRSw0QkFDcEJDLFlBQWNELEVBQUUsd0JBRWhCRSxXQUFhQyxhQUFjQyxhQUFjQyxpQkFDekNDLFFBQVUsRUFDVkMsbUJBQXFCLGtFQUNyQkMsb0JBQXNCLG1FQUN0QkMsb0JBQXNCLGlDQUN0QkMscUJBQXVCLGtDQUd2QkMsY0FBZ0IsU0FBU0MsRUFBWUMsRUFBVUMsR0FDakQsR0FBSUMsR0FDQSxxRkFDc0RILEVBQWEsS0FBT0EsRUFBYSxzQ0FDcERDLEVBQVcseUNBQ1JDLEVBQWEsYUFHbkRFLEVBQU9oQixFQUFFZSxHQUVURSxFQUFlLFdBQ2pCLEdBQUlMLEdBQWFaLEVBQUVrQixNQUFNQyxLQUFLLG1CQUU5QixJQUFrQyxPQUEvQnRCLDJCQUFvQyxDQUNyQyxHQUFJdUIsR0FBNEJwQixFQUFFLHVDQUF5Q0gsMkJBQTZCLEtBQ3hHdUIsR0FBMEJDLEtBQUt4Qiw0QkFFOUJBLDZCQUErQmUsR0FDaENaLEVBQUVrQixNQUFNRyxLQUFLYixxQkFDYlgsMkJBQTZCZSxFQUM3QmQscUJBQXVCRixhQUFhMEIsTUFBTVYsRUFBYSxHQUN2RFcsdUJBQ1MxQiw2QkFBK0JlLElBQ3hDWixFQUFFa0IsTUFBTUcsS0FBS2Qsb0JBQ2JWLDJCQUE2QixLQUM3QkMscUJBQXVCLE1BR3pCQSxxQkFBdUJGLGFBQWEwQixNQUFNekIsMkJBQTZCLEdBRXZFRyxFQUFFLGlDQUFpQ3dCLEtBQUsxQixxQkFBcUIyQixPQUM3RHpCLEVBQUUsbUNBQW1Dd0IsS0FBSzFCLHFCQUFxQjRCLFFBQy9EMUIsRUFBRSwwQ0FBMEN3QixLQUFLMUIscUJBQXFCMkIsTUFBUSxNQUFRN0IsYUFBYTZCLE9BRW5HekIsRUFBRSw4QkFBOEJxQixL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QTBCN0QsRUFBRSx1Q0FBeUNILDJCQUE2QixNQUNsRzhELEVBQXNCM0QsRUFBRSx1Q0FBeUN5RCxFQUFpQixLQUV0RkksR0FBd0J4QyxLQUFLYixxQkFDN0JtRCxFQUFvQnRDLEtBQUtvQyxHQUczQnpELEdBQUU4RCxVQUFVQyxNQUFNLFdBQ2hCN0IsZ0JBQWdCL0IsY0FDaEJKLGdCQUFnQmlDLE1BQU00QixjQUN0QjNELFlBQVkrQixNQUFNcUIsVUFDbEJXLFdBQWFGLFNBQVNHLGVBQWUiLCJmaWxlIjoiYWxidW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCAkIGFsYnVtUGljYXNzbyBhbGJ1bU1hcmNvbmkgYWxidW1QdXJwbGVSYWluIDp0cnVlKi9cblxudmFyIGN1cnJlbnRBbGJ1bSA9IG51bGw7XG52YXIgY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIgPSBudWxsO1xudmFyIGN1cnJlbnRTb25nRnJvbUFsYnVtID0gbnVsbDtcblxudmFyICRwcmV2aW91c0J1dHRvbiA9ICQoXCIubWFpbi1jb250cm9scyAucHJldmlvdXNcIik7XG52YXIgJG5leHRCdXR0b24gPSAkKFwiLm1haW4tY29udHJvbHMgLm5leHRcIik7XG5cbnZhciBhbGJ1bUxpc3QgPSBbYWxidW1QaWNhc3NvLCBhbGJ1bU1hcmNvbmksIGFsYnVtUHVycGxlUmFpbl07XG52YXIgY291bnRlciA9IDA7XG52YXIgcGxheUJ1dHRvblRlbXBsYXRlID0gXCI8YSBjbGFzcz0nYWxidW0tc29uZy1idXR0b24nPjxzcGFuIGNsYXNzPSdpb24tcGxheSc+PC9zcGFuPjwvYT5cIjtcbnZhciBwYXVzZUJ1dHRvblRlbXBsYXRlID0gXCI8YSBjbGFzcz0nYWxidW0tc29uZy1idXR0b24nPjxzcGFuIGNsYXNzPSdpb24tcGF1c2UnPjwvc3Bhbj48L2E+XCI7XG52YXIgcGxheWVyQmFyUGxheUJ1dHRvbiA9IFwiPHNwYW4gY2xhc3M9J2lvbi1wbGF5Jz48L3NwYW4+XCI7XG52YXIgcGxheWVyQmFyUGF1c2VCdXR0b24gPSBcIjxzcGFuIGNsYXNzPSdpb24tcGF1c2UnPjwvc3Bhbj5cIjtcblxuXG52YXIgY3JlYXRlU29uZ1JvdyA9IGZ1bmN0aW9uKHNvbmdOdW1iZXIsIHNvbmdOYW1lLCBzb25nTGVuZ3RoKXtcbiAgdmFyIHRlbXBsYXRlID0gXG4gICAgICBcIjx0ciBjbGFzcz0nYWxidW0tdmlldy1zb25nLWl0ZW0nPlwiICsgXG4gICAgICBcIiAgPHRkIGNsYXNzPSdzb25nLWl0ZW0tbnVtYmVyJyBkYXRhLXNvbmctbnVtYmVyPSdcIiArIHNvbmdOdW1iZXIgKyBcIic+XCIgKyBzb25nTnVtYmVyICsgXCI8L3RkPlwiICsgXG4gICAgICBcIiAgPHRkIGNsYXNzPSdzb25nLWl0ZW0tdGl0bGUnPlwiICsgc29uZ05hbWUgKyBcIjwvdGQ+XCIgKyBcbiAgICAgIFwiICA8dGQgY2xhc3M9J3NvbmctaXRlbS1kdXJhdGlvbic+XCIgKyBzb25nTGVuZ3RoICsgXCI8L3RkPlwiICsgXG4gICAgICBcIjwvdHI+XCI7XG5cbiAgdmFyICRyb3cgPSAkKHRlbXBsYXRlKTtcblxuICB2YXIgY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc29uZ051bWJlciA9ICQodGhpcykuYXR0cihcImRhdGEtc29uZy1udW1iZXJcIik7XG5cbiAgICBpZihjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlciAhPT0gbnVsbCl7XG4gICAgICB2YXIgY3VycmVudGx5UGxheWluZ0NvbnRhaW5lciA9ICQoXCIuc29uZy1pdGVtLW51bWJlcltkYXRhLXNvbmctbnVtYmVyPSdcIiArIGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyICsgXCInXVwiKTtcbiAgICAgIGN1cnJlbnRseVBsYXlpbmdDb250YWluZXIuaHRtbChjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlcik7XG4gICAgfVxuICAgIGlmKGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyICE9PSBzb25nTnVtYmVyKXtcbiAgICAgICQodGhpcykuaHRtbChwYXVzZUJ1dHRvblRlbXBsYXRlKTtcbiAgICAgIGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyID0gc29uZ051bWJlcjtcbiAgICAgIGN1cnJlbnRTb25nRnJvbUFsYnVtID0gY3VycmVudEFsYnVtLnNvbmdzW3NvbmdOdW1iZXIgLSAxXTtcbiAgICAgIHVwZGF0ZVBsYXllckJhclNvbmcoKTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyID09PSBzb25nTnVtYmVyKXtcbiAgICAgICQodGhpcykuaHRtbChwbGF5QnV0dG9uVGVtcGxhdGUpO1xuICAgICAgY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIgPSBudWxsO1xuICAgICAgY3VycmVudFNvbmdGcm9tQWxidW0gPSBudWxsO1xuICAgIH1cblxuICAgIGN1cnJlbnRTb25nRnJvbUFsYnVtID0gY3VycmVudEFsYnVtLnNvbmdzW2N1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyIC0gMV07XG5cbiAgICAkKFwiLmN1cnJlbnRseS1wbGF5aW5nIC5zb25nLW5hbWVcIikudGV4dChjdXJyZW50U29uZ0Zyb21BbGJ1bS50aXRsZSk7XG4gICAgJChcIi5jdXJyZW50bHktcGxheWluZyAuYXJ0aXN0LW5hbWVcIikudGV4dChjdXJyZW50U29uZ0Zyb21BbGJ1bS5hcnRpc3QpO1xuICAgICQoXCIuY3VycmVudGx5LXBsYXlpbmcgLmFydGlzdC1zb25nLW1vYmlsZVwiKS50ZXh0KGN1cnJlbnRTb25nRnJvbUFsYnVtLnRpdGxlICsgXCIgLSBcIiArIGN1cnJlbnRBbGJ1bS50aXRsZSk7XG5cbiAgICAkKFwiLm1haW4tY29udHJvbHMgLnBsYXktcGF1c2VcIikuaHRtbChwbGF5ZXJCYXJQYXVzZUJ1dHRvbik7XG4gIH07XG5cbiAgdmFyIG9uSG92ZXIgPSBmdW5jdGlvbihldmVudCl7XG4gICAgdmFyIHNvbmdOdW1iZXJDb250YWluZXIgPSAkKHRoaXMpLmZpbmQoXCIuc29uZy1pdGVtLW51bWJlclwiKTtcbiAgICB2YXIgc29uZ051bWJlciA9IHNvbmdOdW1iZXJDb250YWluZXIuYXR0cihcImRhdGEtc29uZy1udW1iZXJcIik7XG5cbiAgICBpZihzb25nTnVtYmVyICE9PSBjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlcil7XG4gICAgICBzb25nTnVtYmVyQ29udGFpbmVyLmh0bWwocGxheUJ1dHRvblRlbXBsYXRlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIG9mZkhvdmVyID0gZnVuY3Rpb24oZXZlbnQpe1xuICAgIHZhciBzb25nTnVtYmVyQ29udGFpbmVyID0gJCh0aGlzKS5maW5kKFwiLnNvbmctaXRlbS1udW1iZXJcIik7XG4gICAgdmFyIHNvbmdOdW1iZXIgPSBzb25nTnVtYmVyQ29udGFpbmVyLmF0dHIoXCJkYXRhLXNvbmctbnVtYmVyXCIpO1xuXG4gICAgaWYoc29uZ051bWJlciAhPT0gY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIpe1xuICAgICAgc29uZ051bWJlckNvbnRhaW5lci5odG1sKHNvbmdOdW1iZXIpO1xuICAgIH1cbiAgfTtcblxuICAkcm93LmZpbmQoXCIuc29uZy1pdGVtLW51bWJlclwiKS5jbGljayhjbGlja0hhbmRsZXIpO1xuICAkcm93LmhvdmVyKG9uSG92ZXIsIG9mZkhvdmVyKTtcbiAgcmV0dXJuICRyb3c7XG59O1xuXG52YXIgc2V0Q3VycmVudEFsYnVtID0gZnVuY3Rpb24oYWxidW0pIHtcbiAgY3VycmVudEFsYnVtID0gYWxidW07XG5cbiAgdmFyICRhbGJ1bVRpdGxlID0gJChcIi5hbGJ1bS12aWV3LXRpdGxlXCIpO1xuICB2YXIgJGFsYnVtQXJ0aXN0ID0gJChcIi5hbGJ1bS12aWV3LWFydGlzdFwiKTtcbiAgdmFyICRhbGJ1bVJlbGVhc2VJbmZvID0gJChcIi5hbGJ1bS12aWV3LXJlbGVhc2UtaW5mb1wiKTtcbiAgdmFyICRhbGJ1bUltYWdlID0gJChcIi5hbGJ1bS1jb3Zlci1hcnRcIik7XG4gIHZhciAkYWxidW1Tb25nTGlzdCA9ICQoXCIuYWxidW0tdmlldy1zb25nLWxpc3RcIik7XG5cbiAgJGFsYnVtVGl0bGUudGV4dChhbGJ1bS50aXRsZSk7XG4gICRhbGJ1bUFydGlzdC50ZXh0KGFsYnVtLmFydGlzdCk7XG4gICRhbGJ1bVJlbGVhc2VJbmZvLnRleHQoYWxidW0ueWVhciArIFwiIFwiICsgYWxidW0ubGFiZWwpO1xuICAkYWxidW1JbWFnZS5hdHRyKFwic3JjXCIsIGFsYnVtLmFsYnVtQXJ0VXJsKTtcblxuICAkYWxidW1Tb25nTGlzdC5lbXB0eSgpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYWxidW0uc29uZ3MubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgJG5ld1JvdyA9IGNyZWF0ZVNvbmdSb3coaSArIDEsIGFsYnVtLnNvbmdzW2ldLnRpdGxlLCBhbGJ1bS5zb25nc1tpXS5kdXJhdGlvbik7XG4gICAgJGFsYnVtU29uZ0xpc3QuYXBwZW5kKCRuZXdSb3cpO1xuICB9XG59O1xuXG52YXIgdXBkYXRlUGxheWVyQmFyU29uZyA9IGZ1bmN0aW9uKCl7XG4gICQoXCIubWFpbi1jb250cm9scyAucGxheS1wYXVzZVwiKS5odG1sKHBsYXllckJhclBhdXNlQnV0dG9uKTtcbn07XG5cbnZhciB0cmFja0luZGV4ID0gZnVuY3Rpb24oYWxidW0sIHNvbmcpe1xuICByZXR1cm4gYWxidW0uc29uZ3MuaW5kZXhPZihzb25nKTtcbn07XG5cbnZhciBuZXh0U29uZyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBnZXRMYXN0U29uZ051bWJlciA9IGZ1bmN0aW9uKGluZGV4KXtcbiAgICByZXR1cm4gaW5kZXggPT09IDAgPyBjdXJyZW50QWxidW0uc29uZ3MubGVuZ3RoIDogaW5kZXg7XG4gIH07XG5cbiAgdmFyIGN1cnJlbnRTb25nSW5kZXggPSB0cmFja0luZGV4KGN1cnJlbnRBbGJ1bSwgY3VycmVudFNvbmdGcm9tQWxidW0pO1xuICBjdXJyZW50U29uZ0luZGV4Kys7XG5cbiAgaWYoY3VycmVudFNvbmdJbmRleCA+PSBjdXJyZW50QWxidW0uc29uZ3MubGVuZ3RoKXtcbiAgICBjdXJyZW50U29uZ0luZGV4ID0gMDtcbiAgfVxuXG4gIGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyID0gY3VycmVudFNvbmdJbmRleCArIDE7XG4gIGN1cnJlbnRTb25nRnJvbUFsYnVtID0gY3VycmVudEFsYnVtLnNvbmdzW2N1cnJlbnRTb25nSW5kZXhdO1xuXG4gICQoXCIuY3VycmVudGx5LXBsYXlpbmcgLnNvbmctbmFtZVwiKS50ZXh0KGN1cnJlbnRTb25nRnJvbUFsYnVtLnRpdGxlKTtcbiAgJChcIi5jdXJyZW50bHktcGxheWluZyAuYXJ0aXN0LW5hbWVcIikudGV4dChjdXJyZW50U29uZ0Zyb21BbGJ1bS5hcnRpc3QpO1xuICAkKFwiLmN1cnJlbnRseS1wbGF5aW5nIC5hcnRpc3Qtc29uZy1tb2JpbGVcIikudGV4dChjdXJyZW50U29uZ0Zyb21BbGJ1bS50aXRsZSArIFwiIC0gXCIgKyBjdXJyZW50QWxidW0udGl0bGUpO1xuXG4gICQoXCIubWFpbi1jb250cm9scyAucGxheS1wYXVzZVwiKS5odG1sKHBsYXllckJhclBhdXNlQnV0dG9uKTtcblxuICB2YXIgbGFzdFNvbmdOdW1iZXIgPSBnZXRMYXN0U29uZ051bWJlcihjdXJyZW50U29uZ0luZGV4KTtcbiAgdmFyICRuZXh0U29uZ051bWJlckNlbGwgPSAkKFwiLnNvbmctaXRlbS1udW1iZXJbZGF0YS1zb25nLW51bWJlcj0nXCIgKyBjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlciArIFwiJ11cIik7XG4gIHZhciAkbGFzdFNvbmdOdW1iZXJDZWxsID0gJChcIi5zb25nLWl0ZW0tbnVtYmVyW2RhdGEtc29uZy1udW1iZXI9J1wiICsgbGFzdFNvbmdOdW1iZXIgKyBcIiddXCIpO1xuXG4gICRuZXh0U29uZ051bWJlckNlbGwuaHRtbChwYXVzZUJ1dHRvblRlbXBsYXRlKTtcbiAgJGxhc3RTb25nTnVtYmVyQ2VsbC5odG1sKGxhc3RTb25nTnVtYmVyKTtcbn07XG5cbnZhciBwcmV2aW91c1NvbmcgPSBmdW5jdGlvbigpe1xuICB2YXIgZ2V0TGFzdFNvbmdOdW1iZXIgPSBmdW5jdGlvbihpbmRleCl7XG4gICAgcmV0dXJuIGluZGV4ID09IChjdXJyZW50QWxidW0uc29uZ3MubGVuZ3RoIC0gMSkgPyAxIDogaW5kZXggKyAyO1xuICB9O1xuXG4gIHZhciBjdXJyZW50U29uZ0luZGV4ID0gdHJhY2tJbmRleChjdXJyZW50QWxidW0sIGN1cnJlbnRTb25nRnJvbUFsYnVtKTtcbiAgY3VycmVudFNvbmdJbmRleC0tO1xuXG4gIGlmKGN1cnJlbnRTb25nSW5kZXggPCAwKSB7XG4gICAgY3VycmVudFNvbmdJbmRleCA9IGN1cnJlbnRBbGJ1bS5zb25ncy5sZW5ndGggLSAxO1xuICB9XG5cbiAgY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIgPSBjdXJyZW50U29uZ0luZGV4ICsgMTtcbiAgY3VycmVudFNvbmdGcm9tQWxidW0gPSBjdXJyZW50QWxidW0uc29uZ3NbY3VycmVudFNvbmdJbmRleF07XG5cbiAgJChcIi5jdXJyZW50bHktcGxheWluZyAuc29uZy1uYW1lXCIpLnRleHQoY3VycmVudFNvbmdGcm9tQWxidW0udGl0bGUpO1xuICAkKFwiLmN1cnJlbnRseS1wbGF5aW5nIC5hcnRpc3QtbmFtZVwiKS50ZXh0KGN1cnJlbnRTb25nRnJvbUFsYnVtLmFydGlzdCk7XG4gICQoXCIuY3VycmVudGx5LXBsYXlpbmcgLmFydGlzdC1zb25nLW1vYmlsZVwiKS50ZXh0KGN1cnJlbnRTb25nRnJvbUFsYnVtLnRpdGxlICsgXCIgLSBcIiArIGN1cnJlbnRBbGJ1bS50aXRsZSk7XG5cbiAgJChcIi5tYWluLWNvbnRyb2xzIC5wbGF5LXBhdXNlXCIpLmh0bWwocGxheWVyQmFyUGF1c2VCdXR0b24pO1xuXG4gIHZhciBsYXN0U29uZ051bWJlciA9IGdldExhc3RTb25nTnVtYmVyKGN1cnJlbnRTb25nSW5kZXgpO1xuICB2YXIgJHByZXZpb3VzU29uZ051bWJlckNlbGwgPSAkKFwiLnNvbmctaXRlbS1udW1iZXJbZGF0YS1zb25nLW51bWJlcj0nXCIgKyBjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlciArIFwiJ11cIik7XG4gIHZhciAkbGFzdFNvbmdOdW1iZXJDZWxsID0gJChcIi5zb25nLWl0ZW0tbnVtYmVyW2RhdGEtc29uZy1udW1iZXI9J1wiICsgbGFzdFNvbmdOdW1iZXIgKyBcIiddXCIpO1xuXG4gICRwcmV2aW91c1NvbmdOdW1iZXJDZWxsLmh0bWwocGF1c2VCdXR0b25UZW1wbGF0ZSk7XG4gICRsYXN0U29uZ051bWJlckNlbGwuaHRtbChsYXN0U29uZ051bWJlcik7ICBcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgeyBcbiAgc2V0Q3VycmVudEFsYnVtKGFsYnVtUGljYXNzbyk7XG4gICRwcmV2aW91c0J1dHRvbi5jbGljayhwcmV2aW91c1NvbmcpO1xuICAkbmV4dEJ1dHRvbi5jbGljayhuZXh0U29uZyk7XG4gIGFsYnVtQ292ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsYnVtLWNvdmVyXCIpOyBcbn0pO1xuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
