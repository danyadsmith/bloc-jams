var albumPicasso={title:"The Colors",artist:"Pablo Picasso",label:"Cubism",year:"1881",albumArtUrl:"assets/images/album_covers/01.png",songs:[{title:"Blue",duration:"4:26"},{title:"Green",duration:"3:14"},{title:"Red",duration:"5:01"},{title:"Pink",duration:"3:21"},{title:"Magenta",duration:"2:15"}]},albumMarconi={title:"The Telephone",artist:"Guglielmo Marconi",label:"EM",year:"1909",albumArtUrl:"assets/images/album_covers/20.png",songs:[{title:"Hello Operator?",duration:"1:01"},{title:"Ring, ring, ring",duration:"5:01"},{title:"Fits in your pocket",duration:"3:21"},{title:"Can you hear me now?",duration:"3:14"},{title:"Wrong phone number",duration:"2:15"}]},albumPurpleRain={title:"Purple Rain",artist:"Prince",label:"Warner Bros.",year:"1984",albumArtUrl:"assets/images/album_covers/22.jpg",songs:[{title:"Let's Go Crazy",duration:"4:39"},{title:"Take Me With U",duration:"3:54"},{title:"The Beautiful Ones",duration:"5:14"},{title:"Computer Blue",duration:"4:00"},{title:"Darling Nikki",duration:"4:15"},{title:"When Doves Cry",duration:"5:54"},{title:"I Would Die 4 U",duration:"2:49"},{title:"Baby I'm A Star",duration:"4:25"},{title:"Purple Rain",duration:"8:42"}]},playButtonTemplate='<a class="album-song-button"><span class="ion-play"></span></a>',pauseButtonTemplate='<a class="album-song-button"><span class="ion-pause"></span></a>',currentlyPlayingSong=null,albumList=[albumPicasso,albumMarconi,albumPurpleRain],counter=0,createSongRow=function(e,t,n){var a='<tr class="album-view-song-item">  <td class="song-item-number" data-song-number="'+e+'">'+e+'</td>  <td class="song-item-title">'+t+'</td>  <td class="song-item-duration">'+n+"</td></tr>";return a},setCurrentAlbum=function(e){var t=document.getElementsByClassName("album-view-title")[0],n=document.getElementsByClassName("album-view-artist")[0],a=document.getElementsByClassName("album-view-release-info")[0],l=document.getElementsByClassName("album-cover-art")[0],r=document.getElementsByClassName("album-view-song-list")[0];t.firstChild.nodeValue=e.title,n.firstChild.nodeValue=e.artist,a.firstChild.nodeValue=e.year+" "+e.label,l.setAttribute("src",e.albumArtUrl),r.innerHTML="";for(var o=0;o<e.songs.length;o++)r.innerHTML+=createSongRow(o+1,e.songs[o].title,e.songs[o].duration)},findParentByClassName=function(e,t){var n;if(e)if(n=e.parentElement||null,null===n)console.log("No parent found for "+e+".");else{for(;n.className!==t&&null!==n.className;)n=n.parentElement;if(n.className!==t)return console.log("No parent found with the class name "+t+"."),n;console.log("No "+e+" element found.")}},getSongItem=function(e){switch(e.className){case"album-song-button":case"ion-play":case"ion-pause":return findParentByClassName(e,"song-item-number");case"album-view-song-item":return e.querySelector(".song-item-number");case"song-item-title":case"song-item-duration":return findParentByClassName(e,"album-view-song-item").querySelector(".song-item-number");case"song-item-number":return e;default:return}},clickHandler=function(e){var t=getSongItem(e);if(null===currentlyPlayingSong)t.innerHTML=pauseButtonTemplate,currentlyPlayingSong=t.getAttribute("data-song-number");else if(currentlyPlayingSong===t.getAttribute("data-song-number"))t.innerHTML=playButtonTemplate,currentlyPlayingSong=null;else if(currentlyPlayingSong!==t.getAttribute("data-song-number")){var n=document.querySelector('[data-song-number="'+currentlyPlayingSong+'"]');n.innerHTML=n.getAttribute("data-song-number"),t.innerHTML=pauseButtonTemplate,currentlyPlayingSong=t.getAttribute("data-song-number")}};window.onload=function(){setCurrentAlbum(albumPicasso),albumCover=document.getElementById("album-cover"),songListContainer=document.getElementsByClassName("album-view-song-list")[0],songRows=document.getElementsByClassName("album-view-song-item"),albumCover.addEventListener("click",function(e){setCurrentAlbum(albumList[counter]),counter++,counter>=albumList.length&&(counter=0)},!1),songListContainer.addEventListener("mouseover",function(e){if("album-view-song-item"===e.target.parentElement.className){e.target.parentElement.querySelector(".song-item-number").innerHTML=playButtonTemplate;var t=getSongItem(e.target);t.getAttribute("data-song-number")!==currentlyPlayingSong&&(t.innerHTML=playButtonTemplate)}});for(var e=0;e<songRows.length;e++)songRows[e].addEventListener("mouseleave",function(e){var t=getSongItem(e.target),n=t.getAttribute("data-song-number");n!==currentlyPlayingSong&&(t.innerHTML=n)}),songRows[e].addEventListener("click",function(e){clickHandler(e.target)})};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsYnVtLmpzIl0sIm5hbWVzIjpbImFsYnVtUGljYXNzbyIsInRpdGxlIiwiYXJ0aXN0IiwibGFiZWwiLCJ5ZWFyIiwiYWxidW1BcnRVcmwiLCJzb25ncyIsImR1cmF0aW9uIiwiYWxidW1NYXJjb25pIiwiYWxidW1QdXJwbGVSYWluIiwicGxheUJ1dHRvblRlbXBsYXRlIiwicGF1c2VCdXR0b25UZW1wbGF0ZSIsImN1cnJlbnRseVBsYXlpbmdTb25nIiwiYWxidW1MaXN0IiwiY291bnRlciIsImNyZWF0ZVNvbmdSb3ciLCJzb25nTnVtYmVyIiwic29uZ05hbWUiLCJzb25nTGVuZ3RoIiwidGVtcGxhdGUiLCJzZXRDdXJyZW50QWxidW0iLCJhbGJ1bSIsImFsYnVtVGl0bGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJhbGJ1bUFydGlzdCIsImFsYnVtUmVsZWFzZUluZm8iLCJhbGJ1bUltYWdlIiwiYWxidW1Tb25nTGlzdCIsImZpcnN0Q2hpbGQiLCJub2RlVmFsdWUiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJpIiwibGVuZ3RoIiwiZmluZFBhcmVudEJ5Q2xhc3NOYW1lIiwiZWxlbWVudCIsInBhcmVudENsYXNzTmFtZSIsInBhcmVudEVsZW1lbnQiLCJjb25zb2xlIiwibG9nIiwiY2xhc3NOYW1lIiwiZ2V0U29uZ0l0ZW0iLCJxdWVyeVNlbGVjdG9yIiwiY2xpY2tIYW5kbGVyIiwidGFyZ2V0RWxlbWVudCIsInNvbmdJdGVtIiwiZ2V0QXR0cmlidXRlIiwiY3VycmVudGx5UGxheWluZ1NvbmdFbGVtZW50Iiwid2luZG93Iiwib25sb2FkIiwiYWxidW1Db3ZlciIsImdldEVsZW1lbnRCeUlkIiwic29uZ0xpc3RDb250YWluZXIiLCJzb25nUm93cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsInNvbmdJdGVtTnVtYmVyIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxlQUNGQyxNQUFPLGFBQ1BDLE9B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QWlCLGFBQWMsU0FBU0MsR0FDbEQsR0FBSVYsR0FBV0osWUFBWWMsRUFBTUMsUUFDN0JDLEVBQWlCWixFQUFTQyxhQUFhLG1CQUV2Q1csS0FBbUI5Qyx1QkFDcEJrQyxFQUFTZCxVQUFZMEIsS0FJMUJKLFNBQVNyQixHQUFHc0IsaUJBQWlCLFFBQVMsU0FBU0MsR0FDN0NaLGFBQWFZLEVBQU1DIiwiZmlsZSI6ImFsYnVtLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFsYnVtUGljYXNzbyA9IHtcbiAgdGl0bGU6ICdUaGUgQ29sb3JzJyxcbiAgYXJ0aXN0OiAnUGFibG8gUGljYXNzbycsXG4gIGxhYmVsOiAnQ3ViaXNtJyxcbiAgeWVhcjogJzE4ODEnLFxuICBhbGJ1bUFydFVybDogJ2Fzc2V0cy9pbWFnZXMvYWxidW1fY292ZXJzLzAxLnBuZycsXG4gIHNvbmdzOiBbIFxuICAgIHsgdGl0bGU6ICdCbHVlJywgZHVyYXRpb246ICc0OjI2JyB9LFxuICAgIHsgdGl0bGU6ICdHcmVlbicsIGR1cmF0aW9uOiAnMzoxNCcgfSxcbiAgICB7IHRpdGxlOiAnUmVkJywgZHVyYXRpb246ICc1OjAxJyB9LFxuICAgIHsgdGl0bGU6ICdQaW5rJywgZHVyYXRpb246ICczOjIxJyB9LFxuICAgIHsgdGl0bGU6ICdNYWdlbnRhJywgZHVyYXRpb246ICcyOjE1JyB9XG4gIF1cbn07XG5cbnZhciBhbGJ1bU1hcmNvbmkgPSB7XG4gIHRpdGxlOiAnVGhlIFRlbGVwaG9uZScsXG4gIGFydGlzdDogJ0d1Z2xpZWxtbyBNYXJjb25pJyxcbiAgbGFiZWw6ICdFTScsXG4gIHllYXI6ICcxOTA5JyxcbiAgYWxidW1BcnRVcmw6ICdhc3NldHMvaW1hZ2VzL2FsYnVtX2NvdmVycy8yMC5wbmcnLFxuICBzb25nczogW1xuICAgIHsgdGl0bGU6ICdIZWxsbyBPcGVyYXRvcj8nLCBkdXJhdGlvbjogJzE6MDEnIH0sXG4gICAgeyB0aXRsZTogJ1JpbmcsIHJpbmcsIHJpbmcnLCBkdXJhdGlvbjogJzU6MDEnIH0sXG4gICAgeyB0aXRsZTogJ0ZpdHMgaW4geW91ciBwb2NrZXQnLCBkdXJhdGlvbjogJzM6MjEnIH0sXG4gICAgeyB0aXRsZTogJ0NhbiB5b3UgaGVhciBtZSBub3c/JywgZHVyYXRpb246ICczOjE0JyB9LFxuICAgIHsgdGl0bGU6ICdXcm9uZyBwaG9uZSBudW1iZXInLCBkdXJhdGlvbjogJzI6MTUnIH1cbiAgXVxufTtcblxudmFyIGFsYnVtUHVycGxlUmFpbiA9IHtcbiAgdGl0bGU6ICdQdXJwbGUgUmFpbicsXG4gIGFydGlzdDogJ1ByaW5jZScsXG4gIGxhYmVsOiAnV2FybmVyIEJyb3MuJyxcbiAgeWVhcjogJzE5ODQnLFxuICBhbGJ1bUFydFVybDogJ2Fzc2V0cy9pbWFnZXMvYWxidW1fY292ZXJzLzIyLmpwZycsXG4gIHNvbmdzOiBbXG4gICAgeyB0aXRsZTogJ0xldFxcJ3MgR28gQ3JhenknLCBkdXJhdGlvbjogJzQ6MzknIH0sXG4gICAgeyB0aXRsZTogJ1Rha2UgTWUgV2l0aCBVJywgZHVyYXRpb246ICczOjU0JyB9LFxuICAgIHsgdGl0bGU6ICdUaGUgQmVhdXRpZnVsIE9uZXMnLCBkdXJhdGlvbjogJzU6MTQnIH0sXG4gICAgeyB0aXRsZTogJ0NvbXB1dGVyIEJsdWUnLCBkdXJhdGlvbjogJzQ6MDAnIH0sXG4gICAgeyB0aXRsZTogJ0RhcmxpbmcgTmlra2knLCBkdXJhdGlvbjogJzQ6MTUnIH0sXG4gICAgeyB0aXRsZTogJ1doZW4gRG92ZXMgQ3J5JywgZHVyYXRpb246ICc1OjU0JyB9LFxuICAgIHsgdGl0bGU6ICdJIFdvdWxkIERpZSA0IFUnLCBkdXJhdGlvbjogJzI6NDknIH0sXG4gICAgeyB0aXRsZTogJ0JhYnkgSVxcJ20gQSBTdGFyJywgZHVyYXRpb246ICc0OjI1JyB9LFxuICAgIHsgdGl0bGU6ICdQdXJwbGUgUmFpbicsIGR1cmF0aW9uOiAnODo0MicgfVxuICBdXG59O1xuXG52YXIgcGxheUJ1dHRvblRlbXBsYXRlID0gJzxhIGNsYXNzPVwiYWxidW0tc29uZy1idXR0b25cIj48c3BhbiBjbGFzcz1cImlvbi1wbGF5XCI+PC9zcGFuPjwvYT4nO1xudmFyIHBhdXNlQnV0dG9uVGVtcGxhdGUgPSAnPGEgY2xhc3M9XCJhbGJ1bS1zb25nLWJ1dHRvblwiPjxzcGFuIGNsYXNzPVwiaW9uLXBhdXNlXCI+PC9zcGFuPjwvYT4nO1xudmFyIGN1cnJlbnRseVBsYXlpbmdTb25nID0gbnVsbDtcbnZhciBhbGJ1bUxpc3QgPSBbYWxidW1QaWNhc3NvLCBhbGJ1bU1hcmNvbmksIGFsYnVtUHVycGxlUmFpbl07XG52YXIgY291bnRlciA9IDA7XG5cbnZhciBjcmVhdGVTb25nUm93ID0gZnVuY3Rpb24oc29uZ051bWJlciwgc29uZ05hbWUsIHNvbmdMZW5ndGgpe1xuICB2YXIgdGVtcGxhdGUgPSBcbiAgICAgICc8dHIgY2xhc3M9XCJhbGJ1bS12aWV3LXNvbmctaXRlbVwiPicgKyBcbiAgICAgICcgIDx0ZCBjbGFzcz1cInNvbmctaXRlbS1udW1iZXJcIiBkYXRhLXNvbmctbnVtYmVyPVwiJyArIHNvbmdOdW1iZXIgKyAnXCI+JyArIHNvbmdOdW1iZXIgKyAnPC90ZD4nICsgXG4gICAgICAnICA8dGQgY2xhc3M9XCJzb25nLWl0ZW0tdGl0bGVcIj4nICsgc29uZ05hbWUgKyAnPC90ZD4nICsgXG4gICAgICAnICA8dGQgY2xhc3M9XCJzb25nLWl0ZW0tZHVyYXRpb25cIj4nICsgc29uZ0xlbmd0aCArICc8L3RkPicgKyBcbiAgICAgICc8L3RyPic7XG5cbiAgcmV0dXJuIHRlbXBsYXRlO1xufTtcblxudmFyIHNldEN1cnJlbnRBbGJ1bSA9IGZ1bmN0aW9uKGFsYnVtKSB7XG4gIC8vICMxXG4gIHZhciBhbGJ1bVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYWxidW0tdmlldy10aXRsZScpWzBdO1xuICB2YXIgYWxidW1BcnRpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhbGJ1bS12aWV3LWFydGlzdCcpWzBdO1xuICB2YXIgYWxidW1SZWxlYXNlSW5mbyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2FsYnVtLXZpZXctcmVsZWFzZS1pbmZvJylbMF07XG4gIHZhciBhbGJ1bUltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYWxidW0tY292ZXItYXJ0JylbMF07XG4gIHZhciBhbGJ1bVNvbmdMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYWxidW0tdmlldy1zb25nLWxpc3QnKVswXTtcblxuICAvLyAjMlxuICBhbGJ1bVRpdGxlLmZpcnN0Q2hpbGQubm9kZVZhbHVlID0gYWxidW0udGl0bGU7XG4gIGFsYnVtQXJ0aXN0LmZpcnN0Q2hpbGQubm9kZVZhbHVlID0gYWxidW0uYXJ0aXN0O1xuICBhbGJ1bVJlbGVhc2VJbmZvLmZpcnN0Q2hpbGQubm9kZVZhbHVlID0gYWxidW0ueWVhciArICcgJyArIGFsYnVtLmxhYmVsO1xuICBhbGJ1bUltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgYWxidW0uYWxidW1BcnRVcmwpO1xuXG4gIC8vICMzXG4gIGFsYnVtU29uZ0xpc3QuaW5uZXJIVE1MID0gJyc7XG5cbiAgLy8gIzRcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGJ1bS5zb25ncy5sZW5ndGg7IGkrKykge1xuICAgICBhbGJ1bVNvbmdMaXN0LmlubmVySFRNTCArPSBjcmVhdGVTb25nUm93KGkgKyAxLCBhbGJ1bS5zb25nc1tpXS50aXRsZSwgYWxidW0uc29uZ3NbaV0uZHVyYXRpb24pO1xuICB9XG59O1xuXG52YXIgZmluZFBhcmVudEJ5Q2xhc3NOYW1lID0gZnVuY3Rpb24oZWxlbWVudCwgcGFyZW50Q2xhc3NOYW1lKXtcbiAgdmFyIHBhcmVudEVsZW1lbnQ7XG4gIGlmKGVsZW1lbnQpe1xuICAgIHBhcmVudEVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQgfHwgbnVsbDtcbiAgICBpZihwYXJlbnRFbGVtZW50ID09PSBudWxsKXsgY29uc29sZS5sb2coXCJObyBwYXJlbnQgZm91bmQgZm9yIFwiICsgZWxlbWVudCArIFwiLlwiKTsgXG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlKHBhcmVudEVsZW1lbnQuY2xhc3NOYW1lICE9PSBwYXJlbnRDbGFzc05hbWUgJiYgcGFyZW50RWxlbWVudC5jbGFzc05hbWUgIT09IG51bGwpe1xuICAgICAgICBwYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgfVxuICAgICAgaWYocGFyZW50RWxlbWVudC5jbGFzc05hbWUgIT09IHBhcmVudENsYXNzTmFtZSl7IGNvbnNvbGUubG9nKFwiTm8gcGFyZW50IGZvdW5kIHdpdGggdGhlIGNsYXNzIG5hbWUgXCIgKyBwYXJlbnRDbGFzc05hbWUgKyBcIi5cIik7IFxuICAgICAgICByZXR1cm4gcGFyZW50RWxlbWVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gXCIgKyBlbGVtZW50ICsgXCIgZWxlbWVudCBmb3VuZC5cIik7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG52YXIgZ2V0U29uZ0l0ZW0gPSBmdW5jdGlvbihlbGVtZW50KXtcbiAgc3dpdGNoIChlbGVtZW50LmNsYXNzTmFtZSkge1xuICAgICAgY2FzZSAnYWxidW0tc29uZy1idXR0b24nOlxuICAgICAgY2FzZSAnaW9uLXBsYXknOlxuICAgICAgY2FzZSAnaW9uLXBhdXNlJzpcbiAgICAgICAgICByZXR1cm4gZmluZFBhcmVudEJ5Q2xhc3NOYW1lKGVsZW1lbnQsICdzb25nLWl0ZW0tbnVtYmVyJyk7XG4gICAgICBjYXNlICdhbGJ1bS12aWV3LXNvbmctaXRlbSc6XG4gICAgICAgICAgcmV0dXJuIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNvbmctaXRlbS1udW1iZXInKTtcbiAgICAgIGNhc2UgJ3NvbmctaXRlbS10aXRsZSc6XG4gICAgICBjYXNlICdzb25nLWl0ZW0tZHVyYXRpb24nOlxuICAgICAgICAgIHJldHVybiBmaW5kUGFyZW50QnlDbGFzc05hbWUoZWxlbWVudCwgJ2FsYnVtLXZpZXctc29uZy1pdGVtJykucXVlcnlTZWxlY3RvcignLnNvbmctaXRlbS1udW1iZXInKTtcbiAgICAgIGNhc2UgJ3NvbmctaXRlbS1udW1iZXInOlxuICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm47XG4gIH0gIFxufTtcblxudmFyIGNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKHRhcmdldEVsZW1lbnQpIHtcbiAgdmFyIHNvbmdJdGVtID0gZ2V0U29uZ0l0ZW0odGFyZ2V0RWxlbWVudCk7XG4gIGlmIChjdXJyZW50bHlQbGF5aW5nU29uZyA9PT0gbnVsbCkge1xuICAgIHNvbmdJdGVtLmlubmVySFRNTCA9IHBhdXNlQnV0dG9uVGVtcGxhdGU7XG4gICAgY3VycmVudGx5UGxheWluZ1NvbmcgPSBzb25nSXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc29uZy1udW1iZXInKTtcbiAgfSBcbiAgZWxzZSBpZiAoY3VycmVudGx5UGxheWluZ1NvbmcgPT09IHNvbmdJdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1zb25nLW51bWJlcicpKSB7XG4gICAgc29uZ0l0ZW0uaW5uZXJIVE1MID0gcGxheUJ1dHRvblRlbXBsYXRlO1xuICAgIGN1cnJlbnRseVBsYXlpbmdTb25nID0gbnVsbDtcbiAgfVxuICBlbHNlIGlmIChjdXJyZW50bHlQbGF5aW5nU29uZyAhPT0gc29uZ0l0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXNvbmctbnVtYmVyJykpIHtcbiAgICB2YXIgY3VycmVudGx5UGxheWluZ1NvbmdFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtc29uZy1udW1iZXI9XCInICsgY3VycmVudGx5UGxheWluZ1NvbmcgKyAnXCJdJyk7XG4gICAgY3VycmVudGx5UGxheWluZ1NvbmdFbGVtZW50LmlubmVySFRNTCA9IGN1cnJlbnRseVBsYXlpbmdTb25nRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc29uZy1udW1iZXInKTtcbiAgICBzb25nSXRlbS5pbm5lckhUTUwgPSBwYXVzZUJ1dHRvblRlbXBsYXRlO1xuICAgIGN1cnJlbnRseVBsYXlpbmdTb25nID0gc29uZ0l0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXNvbmctbnVtYmVyJyk7XG4gIH1cbn07XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgc2V0Q3VycmVudEFsYnVtKGFsYnVtUGljYXNzbyk7XG4gIGFsYnVtQ292ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxidW0tY292ZXInKTtcbiAgc29uZ0xpc3RDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhbGJ1bS12aWV3LXNvbmctbGlzdCcpWzBdO1xuICBzb25nUm93cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2FsYnVtLXZpZXctc29uZy1pdGVtJyk7XG5cbiAgYWxidW1Db3Zlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQpeyAgIFxuICAgIC8vY29uc29sZS5sb2coZXZlbnQpO1xuICAgIHNldEN1cnJlbnRBbGJ1bShhbGJ1bUxpc3RbY291bnRlcl0pO1xuICAgIGNvdW50ZXIrKztcbiAgICBpZihjb3VudGVyID49IGFsYnVtTGlzdC5sZW5ndGgpeyBjb3VudGVyID0gMDsgfVxuICB9LCBmYWxzZSk7XG5cbiAgc29uZ0xpc3RDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24oZXZlbnQpe1xuICAgIC8vY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KTtcbiAgICBpZihldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc05hbWUgPT09ICdhbGJ1bS12aWV3LXNvbmctaXRlbScpe1xuICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNvbmctaXRlbS1udW1iZXInKS5pbm5lckhUTUwgPSBwbGF5QnV0dG9uVGVtcGxhdGU7XG4gICAgICB2YXIgc29uZ0l0ZW0gPSBnZXRTb25nSXRlbShldmVudC50YXJnZXQpO1xuICAgICAgaWYgKHNvbmdJdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1zb25nLW51bWJlcicpICE9PSBjdXJyZW50bHlQbGF5aW5nU29uZykge1xuICAgICAgICBzb25nSXRlbS5pbm5lckhUTUwgPSBwbGF5QnV0dG9uVGVtcGxhdGU7XG4gICAgICB9ICAgICAgXG4gICAgfVxuICB9KTtcblxuICBmb3IodmFyIGkgPSAwOyBpIDwgc29uZ1Jvd3MubGVuZ3RoOyBpKyspe1xuICAgIHNvbmdSb3dzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihldmVudCl7XG4gICAgICB2YXIgc29uZ0l0ZW0gPSBnZXRTb25nSXRlbShldmVudC50YXJnZXQpO1xuICAgICAgdmFyIHNvbmdJdGVtTnVtYmVyID0gc29uZ0l0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXNvbmctbnVtYmVyJyk7XG5cbiAgICAgIGlmIChzb25nSXRlbU51bWJlciAhPT0gY3VycmVudGx5UGxheWluZ1NvbmcpIHtcbiAgICAgICAgIHNvbmdJdGVtLmlubmVySFRNTCA9IHNvbmdJdGVtTnVtYmVyO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc29uZ1Jvd3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgY2xpY2tIYW5kbGVyKGV2ZW50LnRhcmdldCk7XG4gICAgfSk7ICAgIFxuICB9XG59OyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
