var currentAlbum=null,currentlyPlayingSongNumber=null,currentSongFromAlbum=null,currentSongFile=null,currentVolume=80,$previousButton=$(".main-controls .previous"),$nextButton=$(".main-controls .next"),$playPauseToggle=$(".main-controls .play-pause"),$volumeBar=$(".volume .fill"),$volumeSlider=$(".volume .thumb"),albumList=[albumPicasso,albumMarconi,albumPurpleRain],counter=0,playButtonTemplate="<a class='album-song-button'><span class='ion-play'></span></a>",pauseButtonTemplate="<a class='album-song-button'><span class='ion-pause'></span></a>",playerBarPlayButton="<span class='ion-play'></span>",playerBarPauseButton="<span class='ion-pause'></span>",createSongRow=function(e,n,t){var r="<tr class='album-view-song-item'>  <td class='song-item-number' data-song-number='"+e+"'>"+e+"</td>  <td class='song-item-title'>"+n+"</td>  <td class='song-item-duration'>"+t+"</td></tr>",u=$(r),a=function(){var e=$(this).attr("data-song-number");if(null!==currentlyPlayingSongNumber){var n=getSongNumberContainer(currentlyPlayingSongNumber);n.html(currentlyPlayingSongNumber)}currentlyPlayingSongNumber!==e?($(this).html(pauseButtonTemplate),setSong(e),updatePlayerBarSong(),currentSongFile.play(),updateSeekBarWhileSongPlays(),$volumeBar.width(currentVolume+"%"),$volumeSlider.css("left",currentVolume+"%")):currentlyPlayingSongNumber===e&&(currentSongFile.isPaused()?($(this).html(pauseButtonTemplate),$playPauseToggle.html(playerBarPauseButton),currentSongFile.play(),updateSeekBarWhileSongPlays()):($(this).html(playButtonTemplate),$playPauseToggle.html(playerBarPlayButton),currentSongFile.pause()))},l=function(e){var n=$(this).find(".song-item-number"),t=n.attr("data-song-number");t!==currentlyPlayingSongNumber&&n.html(playButtonTemplate)},o=function(e){var n=$(this).find(".song-item-number"),t=n.attr("data-song-number");t!==currentlyPlayingSongNumber&&n.html(t)};return u.find(".song-item-number").click(a),u.hover(l,o),u},getSongNumberContainer=function(e){return $(".song-item-number[data-song-number='"+e+"']")},nextSong=function(){var e=function(e){return 0===e?currentAlbum.songs.length:e},n=trackIndex(currentAlbum,currentSongFromAlbum);n++,n>=currentAlbum.songs.length&&(n=0),setSong(n+1),currentSongFile.play(),updatePlayerBarSong(),updateSeekBarWhileSongPlays();var t=e(n),r=getSongNumberContainer(currentlyPlayingSongNumber),u=getSongNumberContainer(t);r.html(pauseButtonTemplate),u.html(t)},previousSong=function(){var e=function(e){return e==currentAlbum.songs.length-1?1:e+2},n=trackIndex(currentAlbum,currentSongFromAlbum);n--,n<0&&(n=currentAlbum.songs.length-1),setSong(n+1),currentSongFile.play(),updatePlayerBarSong(),updateSeekBarWhileSongPlays();var t=e(n),r=getSongNumberContainer(currentlyPlayingSongNumber),u=getSongNumberContainer(t);r.html(pauseButtonTemplate),u.html(t)},seek=function(e){currentSongFile&&currentSongFile.setTime(e)},setCurrentAlbum=function(e){currentAlbum=e;var n=$(".album-view-title"),t=$(".album-view-artist"),r=$(".album-view-release-info"),u=$(".album-cover-art"),a=$(".album-view-song-list");n.text(e.title),t.text(e.artist),r.text(e.year+" "+e.label),u.attr("src",e.albumArtUrl),a.empty();for(var l=0;l<e.songs.length;l++){var o=createSongRow(l+1,e.songs[l].title,e.songs[l].duration);a.append(o)}},setSong=function(e){currentSongFile&&currentSongFile.stop(),currentlyPlayingSongNumber=e,currentSongFromAlbum=currentAlbum.songs[e-1],currentSongFile=new buzz.sound(currentSongFromAlbum.audioUrl,{formats:["mp3"],preload:!0}),setVolume(currentVolume),$(".currently-playing .song-name").text(currentSongFromAlbum.title),$(".currently-playing .artist-name").text(currentSongFromAlbum.artist),$(".currently-playing .artist-song-mobile").text(currentSongFromAlbum.title+" - "+currentAlbum.title),$playPauseToggle.html(playerBarPauseButton)},setVolume=function(e){currentSongFile&&currentSongFile.setVolume(e)},setupSeekBars=function(){var e=$(".player-bar .seek-bar");e.click(function(e){var n=e.pageX-$(this).offset().left,t=$(this).width(),r=n/t;$(this).parent().hasClass("volume")?setVolume(100*r):seek(r*currentSongFile.getDuration()),updateSeekPercentage($(this),r)}),e.find(".thumb").mousedown(function(e){var n=$(this).parent();$(document).bind("mousemove.thumb",function(e){var t=e.pageX-n.offset().left,r=n.width(),u=t/r;$(this).parent().hasClass("volume")?setVolume(u):seek(u*currentSongFile.getDuration()),updateSeekPercentage(n,u)}),$(document).bind("mouseup.thumb",function(){$(document).unbind("mousemove.thumb"),$(document).unbind("mouseup.thumb")})})},togglePlayFromPlayerBar=function(){currentSongFile.isPaused()?($playPauseToggle.html(playerBarPauseButton),getSongNumberContainer(currentlyPlayingSongNumber).html(pauseButtonTemplate),currentSongFile.play()):($playPauseToggle.html(playerBarPlayButton),getSongNumberContainer(currentlyPlayingSongNumber).html(currentlyPlayingSongNumber),currentSongFile.pause())},trackIndex=function(e,n){return e.songs.indexOf(n)},updatePlayerBarSong=function(){$playPauseToggle.html(playerBarPauseButton)},updateSeekBarWhileSongPlays=function(){currentSongFile&&currentSongFile.bind("timeupdate",function(e){var n=this.getTime()/this.getDuration(),t=$(".seek-control .seek-bar");updateSeekPercentage(t,n)})},updateSeekPercentage=function(e,n){var t=100*n;t=Math.max(0,t),t=Math.min(100,t);var r=t+"%";e.find(".fill").width(r),e.find(".thumb").css({left:r})};$(document).ready(function(){setCurrentAlbum(albumPicasso),setupSeekBars(),$previousButton.click(previousSong),$nextButton.click(nextSong),$playPauseToggle.click(togglePlayFromPlayerBar);document.getElementById("album-cover")});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsYnVtLmpzIl0sIm5hbWVzIjpbImN1cnJlbnRBbGJ1bSIsImN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyIiwiY3VycmVudFNvbmdGcm9tQWxidW0iLCJjdXJyZW50U29uZ0ZpbGUiLCJjdXJyZW50Vm9sdW1lIiwiJHByZXZpb3VzQnV0dG9uIiwiJCIsIiRuZXh0QnV0dG9uIiwiJHBsYXlQYXVzZVRvZ2dsZSIsIiR2b2x1bWVCYXIiLCIkdm9sdW1lU2xpZGVyIiwiYWxidW1MaXN0IiwiYWxidW1QaWNhc3NvIiwiYWxidW1NYXJjb25pIiwiYWxidW1QdXJwbGVSYWluIiwiY291bnRlciIsInBsYXlCdXR0b25UZW1wbGF0ZSIsInBhdXNlQnV0dG9uVGVtcGxhdGUiLCJwbGF5ZXJCYXJQbGF5QnV0dG9uIiwicGxheWVyQmFyUGF1c2VCdXR0b24iLCJjcmVhdGVTb25nUm93Iiwic29uZ051bWJlciIsInNvbmdOYW1lIiwic29uZ0xlbmd0aCIsInRlbXBsYXRlIiwiJHJvdyIsImNsaWNrSGFuZGxlciIsInRoaXMiLCJhdHRyIiwiY3VycmVudGx5UGxheWluZ0NvbnRhaW5lciIsImdldFNvbmdOdW1iZXJDb250YWluZXIiLCJodG1sIiwic2V0U29uZyIsInVwZGF0ZVBsYXllckJhclNvbmciLCJwbGF5IiwidXBkYXRlU2Vla0JhcldoaWxlU29uZ1BsYXlzIiwid2lkdGgiLCJjc3MiLCJpc1BhdXNlZCIsInBhdXNlIiwib25Ib3ZlciIsImV2ZW50Iiwic29uZ051bWJlckNvbnRhaW5lciIsImZpbmQiLCJvZmZIb3ZlciIsImNsaWNrIiwiaG92ZXIiLCJudW1iZXIiLCJuZXh0U29uZyIsImdldExhc3RTb25nTnVtYmVyIiwiaW5kZXgiLCJzb25ncyIsImxlbmd0aCIsImN1cnJlbnRTb25nSW5kZXgiLCJ0cmFja0luZGV4IiwibGFzdFNvbmdOdW1iZXIiLCIkbmV4dFNvbmdOdW1iZXJDZWxsIiwiJGxhc3RTb25nTnVtYmVyQ2VsbCIsInByZXZpb3VzU29uZyIsIiRwcmV2aW91c1NvbmdOdW1iZXJDZWxsIiwic2VlayIsInRpbWUiLCJzZXRUaW1lIiwic2V0Q3VycmVudEFsYnVtIiwiYWxidW0iLCIkYWxidW1UaXRsZSIsIiRhbGJ1bUFydGlzdCIsIiRhbGJ1bVJlbGVhc2VJbmZvIiwiJGFsYnVtSW1hZ2UiLCIkYWxidW1Tb25nTGlzdCIsInRleHQiLCJ0aXRsZSIsImFydGlzdCIsInllYXIiLCJsYWJlbCIsImFsYnVtQXJ0VXJsIiwiZW1wdHkiLCJpIiwiJG5ld1JvdyIsImR1cmF0aW9uIiwiYXBwZW5kIiwic3RvcCIsImJ1enoiLCJzb3VuZCIsImF1ZGlvVXJsIiwiZm9ybWF0cyIsInByZWxvYWQiLCJzZXRWb2x1bWUiLCJ2b2x1bWUiLCJzZXR1cFNlZWtCYXJzIiwiJHNlZWtCYXJzIiwib2Zmc2V0WCIsInBhZ2VYIiwib2Zmc2V0IiwibGVmdCIsImJhcldpZHRoIiwic2Vla0JhckZpbGxSYXRpbyIsInBhcmVudCIsImhhc0NsYXNzIiwiZ2V0RHVyYXRpb24iLCJ1cGRhdGVTZWVrUGVyY2VudGFnZSIsIm1vdXNlZG93biIsIiRjdXJyZW50U2Vla0JhciIsImRvY3VtZW50IiwiYmluZCIsInVuYmluZCIsInRvZ2dsZVBsYXlGcm9tUGxheWVyQmFyIiwic29uZyIsImluZGV4T2YiLCJnZXRUaW1lIiwiJHNlZWtCYXIiLCJvZmZzZXRYUGVyY2VudCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJwZXJjZW50YWdlU3RyaW5nIiwicmVhZHkiLCJnZXRFbGVtZW50QnlJZCJdLCJtYXBwaW5ncyI6IkFBRUEsR0FBSUEsY0FBZSxLQUNmQywyQkFBNkIsS0FDN0JDLHFCQUF1QixLQUN2QkMsZ0JBQWtCLEtBQ2xCQyxjQUFnQixHQUVoQkMsZ0JBQWtCQyxFQUFFLDRCQUNwQkMsWUFBY0QsRUFBRSx3QkFDaEJFLGlCQUFtQkYsRUFBRSw4QkFDckJHLFdBQWFILEVBQUUsaUJBQ2ZJLGNBQWdCSixFQUFFLGtCQUVsQkssV0FBYUMsYUFBY0MsYUFBY0MsaUJBQ3pDQyxRQUFVLEVBQ1ZDLG1C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QVVkLE1BS2pDSSxxQkFBdUIsU0FBU1UsRUFBVWQsR0FDNUMsR0FBSWUsR0FBb0MsSUFBbkJmLENBQ3JCZSxHQUFpQkMsS0FBS0MsSUFBSSxFQUFHRixHQUM3QkEsRUFBaUJDLEtBQUtFLElBQUksSUFBS0gsRUFFL0IsSUFBSUksR0FBbUJKLEVBQWlCLEdBQ3hDRCxHQUFTbkUsS0FBSyxTQUFTUCxNQUFNK0UsR0FDN0JMLEVBQVNuRSxLQUFLLFVBQVVOLEtBQUt5RCxLQUFNcUIsSUFHckM3RyxHQUFFaUcsVUFBVWEsTUFBTSxXQUNoQnJELGdCQUFnQm5ELGNBQ2hCNkUsZ0JBQ0FwRixnQkFBZ0J3QyxNQUFNYSxjQUN0Qm5ELFlBQVlzQyxNQUFNRyxVQUNsQnhDLGlCQUFpQnFDLE1BQU02RCx3QkFDTkgsVUFBU2MsZUFBZSIsImZpbGUiOiJhbGJ1bS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qZ2xvYmFsICQgYWxidW1QaWNhc3NvIGFsYnVtTWFyY29uaSBhbGJ1bVB1cnBsZVJhaW4gOnRydWUqL1xuXG52YXIgY3VycmVudEFsYnVtID0gbnVsbDtcbnZhciBjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlciA9IG51bGw7XG52YXIgY3VycmVudFNvbmdGcm9tQWxidW0gPSBudWxsO1xudmFyIGN1cnJlbnRTb25nRmlsZSA9IG51bGw7XG52YXIgY3VycmVudFZvbHVtZSA9IDgwO1xuXG52YXIgJHByZXZpb3VzQnV0dG9uID0gJChcIi5tYWluLWNvbnRyb2xzIC5wcmV2aW91c1wiKTtcbnZhciAkbmV4dEJ1dHRvbiA9ICQoXCIubWFpbi1jb250cm9scyAubmV4dFwiKTtcbnZhciAkcGxheVBhdXNlVG9nZ2xlID0gJChcIi5tYWluLWNvbnRyb2xzIC5wbGF5LXBhdXNlXCIpO1xudmFyICR2b2x1bWVCYXIgPSAkKFwiLnZvbHVtZSAuZmlsbFwiKTtcbnZhciAkdm9sdW1lU2xpZGVyID0gJChcIi52b2x1bWUgLnRodW1iXCIpO1xuXG52YXIgYWxidW1MaXN0ID0gW2FsYnVtUGljYXNzbywgYWxidW1NYXJjb25pLCBhbGJ1bVB1cnBsZVJhaW5dO1xudmFyIGNvdW50ZXIgPSAwO1xudmFyIHBsYXlCdXR0b25UZW1wbGF0ZSA9IFwiPGEgY2xhc3M9J2FsYnVtLXNvbmctYnV0dG9uJz48c3BhbiBjbGFzcz0naW9uLXBsYXknPjwvc3Bhbj48L2E+XCI7XG52YXIgcGF1c2VCdXR0b25UZW1wbGF0ZSA9IFwiPGEgY2xhc3M9J2FsYnVtLXNvbmctYnV0dG9uJz48c3BhbiBjbGFzcz0naW9uLXBhdXNlJz48L3NwYW4+PC9hPlwiO1xudmFyIHBsYXllckJhclBsYXlCdXR0b24gPSBcIjxzcGFuIGNsYXNzPSdpb24tcGxheSc+PC9zcGFuPlwiO1xudmFyIHBsYXllckJhclBhdXNlQnV0dG9uID0gXCI8c3BhbiBjbGFzcz0naW9uLXBhdXNlJz48L3NwYW4+XCI7XG5cblxudmFyIGNyZWF0ZVNvbmdSb3cgPSBmdW5jdGlvbihzb25nTnVtYmVyLCBzb25nTmFtZSwgc29uZ0xlbmd0aCl7XG4gIHZhciB0ZW1wbGF0ZSA9IFxuICAgICAgXCI8dHIgY2xhc3M9J2FsYnVtLXZpZXctc29uZy1pdGVtJz5cIiArIFxuICAgICAgXCIgIDx0ZCBjbGFzcz0nc29uZy1pdGVtLW51bWJlcicgZGF0YS1zb25nLW51bWJlcj0nXCIgKyBzb25nTnVtYmVyICsgXCInPlwiICsgc29uZ051bWJlciArIFwiPC90ZD5cIiArIFxuICAgICAgXCIgIDx0ZCBjbGFzcz0nc29uZy1pdGVtLXRpdGxlJz5cIiArIHNvbmdOYW1lICsgXCI8L3RkPlwiICsgXG4gICAgICBcIiAgPHRkIGNsYXNzPSdzb25nLWl0ZW0tZHVyYXRpb24nPlwiICsgc29uZ0xlbmd0aCArIFwiPC90ZD5cIiArIFxuICAgICAgXCI8L3RyPlwiO1xuXG4gIHZhciAkcm93ID0gJCh0ZW1wbGF0ZSk7XG5cbiAgdmFyIGNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNvbmdOdW1iZXIgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLXNvbmctbnVtYmVyXCIpO1xuXG4gICAgaWYoY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIgIT09IG51bGwpe1xuICAgICAgdmFyIGN1cnJlbnRseVBsYXlpbmdDb250YWluZXIgPSBnZXRTb25nTnVtYmVyQ29udGFpbmVyKGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyKTtcbiAgICAgIGN1cnJlbnRseVBsYXlpbmdDb250YWluZXIuaHRtbChjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlcik7XG4gICAgfVxuICAgIGlmKGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyICE9PSBzb25nTnVtYmVyKXtcbiAgICAgICQodGhpcykuaHRtbChwYXVzZUJ1dHRvblRlbXBsYXRlKTtcbiAgICAgIHNldFNvbmcoc29uZ051bWJlcik7XG4gICAgICB1cGRhdGVQbGF5ZXJCYXJTb25nKCk7XG4gICAgICBjdXJyZW50U29uZ0ZpbGUucGxheSgpO1xuICAgICAgdXBkYXRlU2Vla0JhcldoaWxlU29uZ1BsYXlzKCk7XG4gICAgICAkdm9sdW1lQmFyLndpZHRoKGN1cnJlbnRWb2x1bWUgKyBcIiVcIik7XG4gICAgICAkdm9sdW1lU2xpZGVyLmNzcyhcImxlZnRcIiwgY3VycmVudFZvbHVtZSArIFwiJVwiKTtcbiAgICAgIFxuICAgIH0gZWxzZSBpZiAoY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIgPT09IHNvbmdOdW1iZXIpe1xuICAgICAgaWYoY3VycmVudFNvbmdGaWxlLmlzUGF1c2VkKCkpe1xuICAgICAgICAkKHRoaXMpLmh0bWwocGF1c2VCdXR0b25UZW1wbGF0ZSk7XG4gICAgICAgICRwbGF5UGF1c2VUb2dnbGUuaHRtbChwbGF5ZXJCYXJQYXVzZUJ1dHRvbik7XG4gICAgICAgIGN1cnJlbnRTb25nRmlsZS5wbGF5KCk7XG4gICAgICAgIHVwZGF0ZVNlZWtCYXJXaGlsZVNvbmdQbGF5cygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJCh0aGlzKS5odG1sKHBsYXlCdXR0b25UZW1wbGF0ZSk7XG4gICAgICAgICRwbGF5UGF1c2VUb2dnbGUuaHRtbChwbGF5ZXJCYXJQbGF5QnV0dG9uKTtcbiAgICAgICAgY3VycmVudFNvbmdGaWxlLnBhdXNlKCk7ICAgICAgICBcbiAgICAgIH1cbiAgICB9XG5cbiAgfTtcblxuICB2YXIgb25Ib3ZlciA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgICB2YXIgc29uZ051bWJlckNvbnRhaW5lciA9ICQodGhpcykuZmluZChcIi5zb25nLWl0ZW0tbnVtYmVyXCIpO1xuICAgIHZhciBzb25nTnVtYmVyID0gc29uZ051bWJlckNvbnRhaW5lci5hdHRyKFwiZGF0YS1zb25nLW51bWJlclwiKTtcblxuICAgIGlmKHNvbmdOdW1iZXIgIT09IGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyKXtcbiAgICAgIHNvbmdOdW1iZXJDb250YWluZXIuaHRtbChwbGF5QnV0dG9uVGVtcGxhdGUpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgb2ZmSG92ZXIgPSBmdW5jdGlvbihldmVudCl7XG4gICAgdmFyIHNvbmdOdW1iZXJDb250YWluZXIgPSAkKHRoaXMpLmZpbmQoXCIuc29uZy1pdGVtLW51bWJlclwiKTtcbiAgICB2YXIgc29uZ051bWJlciA9IHNvbmdOdW1iZXJDb250YWluZXIuYXR0cihcImRhdGEtc29uZy1udW1iZXJcIik7XG5cbiAgICBpZihzb25nTnVtYmVyICE9PSBjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlcil7XG4gICAgICBzb25nTnVtYmVyQ29udGFpbmVyLmh0bWwoc29uZ051bWJlcik7XG4gICAgfVxuICB9O1xuXG4gICRyb3cuZmluZChcIi5zb25nLWl0ZW0tbnVtYmVyXCIpLmNsaWNrKGNsaWNrSGFuZGxlcik7XG4gICRyb3cuaG92ZXIob25Ib3Zlciwgb2ZmSG92ZXIpO1xuICByZXR1cm4gJHJvdztcbn07XG5cbnZhciBnZXRTb25nTnVtYmVyQ29udGFpbmVyID0gZnVuY3Rpb24obnVtYmVyKXtcbiAgcmV0dXJuICQoXCIuc29uZy1pdGVtLW51bWJlcltkYXRhLXNvbmctbnVtYmVyPSdcIiArIG51bWJlciArIFwiJ11cIik7XG59O1xuXG52YXIgbmV4dFNvbmcgPSBmdW5jdGlvbigpe1xuICB2YXIgZ2V0TGFzdFNvbmdOdW1iZXIgPSBmdW5jdGlvbihpbmRleCl7XG4gICAgcmV0dXJuIGluZGV4ID09PSAwID8gY3VycmVudEFsYnVtLnNvbmdzLmxlbmd0aCA6IGluZGV4O1xuICB9O1xuXG4gIHZhciBjdXJyZW50U29uZ0luZGV4ID0gdHJhY2tJbmRleChjdXJyZW50QWxidW0sIGN1cnJlbnRTb25nRnJvbUFsYnVtKTtcbiAgY3VycmVudFNvbmdJbmRleCsrO1xuXG4gIGlmKGN1cnJlbnRTb25nSW5kZXggPj0gY3VycmVudEFsYnVtLnNvbmdzLmxlbmd0aCl7XG4gICAgY3VycmVudFNvbmdJbmRleCA9IDA7XG4gIH1cblxuICBzZXRTb25nKGN1cnJlbnRTb25nSW5kZXggKyAxKTtcbiAgY3VycmVudFNvbmdGaWxlLnBsYXkoKTtcbiAgdXBkYXRlUGxheWVyQmFyU29uZygpO1xuICB1cGRhdGVTZWVrQmFyV2hpbGVTb25nUGxheXMoKTtcblxuICB2YXIgbGFzdFNvbmdOdW1iZXIgPSBnZXRMYXN0U29uZ051bWJlcihjdXJyZW50U29uZ0luZGV4KTtcbiAgdmFyICRuZXh0U29uZ051bWJlckNlbGwgPSBnZXRTb25nTnVtYmVyQ29udGFpbmVyKGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyKTtcbiAgdmFyICRsYXN0U29uZ051bWJlckNlbGwgPSBnZXRTb25nTnVtYmVyQ29udGFpbmVyKGxhc3RTb25nTnVtYmVyKTtcblxuICAkbmV4dFNvbmdOdW1iZXJDZWxsLmh0bWwocGF1c2VCdXR0b25UZW1wbGF0ZSk7XG4gICRsYXN0U29uZ051bWJlckNlbGwuaHRtbChsYXN0U29uZ051bWJlcik7XG59O1xuXG52YXIgcHJldmlvdXNTb25nID0gZnVuY3Rpb24oKXtcbiAgdmFyIGdldExhc3RTb25nTnVtYmVyID0gZnVuY3Rpb24oaW5kZXgpe1xuICAgIHJldHVybiBpbmRleCA9PSAoY3VycmVudEFsYnVtLnNvbmdzLmxlbmd0aCAtIDEpID8gMSA6IGluZGV4ICsgMjtcbiAgfTtcblxuICB2YXIgY3VycmVudFNvbmdJbmRleCA9IHRyYWNrSW5kZXgoY3VycmVudEFsYnVtLCBjdXJyZW50U29uZ0Zyb21BbGJ1bSk7XG4gIGN1cnJlbnRTb25nSW5kZXgtLTtcblxuICBpZihjdXJyZW50U29uZ0luZGV4IDwgMCkge1xuICAgIGN1cnJlbnRTb25nSW5kZXggPSBjdXJyZW50QWxidW0uc29uZ3MubGVuZ3RoIC0gMTtcbiAgfVxuXG4gIHNldFNvbmcoY3VycmVudFNvbmdJbmRleCArIDEpO1xuICBjdXJyZW50U29uZ0ZpbGUucGxheSgpO1xuICB1cGRhdGVQbGF5ZXJCYXJTb25nKCk7XG4gIHVwZGF0ZVNlZWtCYXJXaGlsZVNvbmdQbGF5cygpO1xuXG4gIHZhciBsYXN0U29uZ051bWJlciA9IGdldExhc3RTb25nTnVtYmVyKGN1cnJlbnRTb25nSW5kZXgpO1xuICB2YXIgJHByZXZpb3VzU29uZ051bWJlckNlbGwgPSBnZXRTb25nTnVtYmVyQ29udGFpbmVyKGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyKTtcbiAgdmFyICRsYXN0U29uZ051bWJlckNlbGwgPSBnZXRTb25nTnVtYmVyQ29udGFpbmVyKGxhc3RTb25nTnVtYmVyKTtcblxuICAkcHJldmlvdXNTb25nTnVtYmVyQ2VsbC5odG1sKHBhdXNlQnV0dG9uVGVtcGxhdGUpO1xuICAkbGFzdFNvbmdOdW1iZXJDZWxsLmh0bWwobGFzdFNvbmdOdW1iZXIpOyAgXG59O1xuXG52YXIgc2VlayA9IGZ1bmN0aW9uKHRpbWUpe1xuICBpZihjdXJyZW50U29uZ0ZpbGUpe1xuICAgIGN1cnJlbnRTb25nRmlsZS5zZXRUaW1lKHRpbWUpO1xuICB9XG59O1xuXG52YXIgc2V0Q3VycmVudEFsYnVtID0gZnVuY3Rpb24oYWxidW0pIHtcbiAgY3VycmVudEFsYnVtID0gYWxidW07XG5cbiAgdmFyICRhbGJ1bVRpdGxlID0gJChcIi5hbGJ1bS12aWV3LXRpdGxlXCIpO1xuICB2YXIgJGFsYnVtQXJ0aXN0ID0gJChcIi5hbGJ1bS12aWV3LWFydGlzdFwiKTtcbiAgdmFyICRhbGJ1bVJlbGVhc2VJbmZvID0gJChcIi5hbGJ1bS12aWV3LXJlbGVhc2UtaW5mb1wiKTtcbiAgdmFyICRhbGJ1bUltYWdlID0gJChcIi5hbGJ1bS1jb3Zlci1hcnRcIik7XG4gIHZhciAkYWxidW1Tb25nTGlzdCA9ICQoXCIuYWxidW0tdmlldy1zb25nLWxpc3RcIik7XG5cbiAgJGFsYnVtVGl0bGUudGV4dChhbGJ1bS50aXRsZSk7XG4gICRhbGJ1bUFydGlzdC50ZXh0KGFsYnVtLmFydGlzdCk7XG4gICRhbGJ1bVJlbGVhc2VJbmZvLnRleHQoYWxidW0ueWVhciArIFwiIFwiICsgYWxidW0ubGFiZWwpO1xuICAkYWxidW1JbWFnZS5hdHRyKFwic3JjXCIsIGFsYnVtLmFsYnVtQXJ0VXJsKTtcblxuICAkYWxidW1Tb25nTGlzdC5lbXB0eSgpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYWxidW0uc29uZ3MubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgJG5ld1JvdyA9IGNyZWF0ZVNvbmdSb3coaSArIDEsIGFsYnVtLnNvbmdzW2ldLnRpdGxlLCBhbGJ1bS5zb25nc1tpXS5kdXJhdGlvbik7XG4gICAgJGFsYnVtU29uZ0xpc3QuYXBwZW5kKCRuZXdSb3cpO1xuICB9XG59O1xuXG52YXIgc2V0U29uZyA9IGZ1bmN0aW9uKHNvbmdOdW1iZXIpe1xuICBpZihjdXJyZW50U29uZ0ZpbGUpe1xuICAgIGN1cnJlbnRTb25nRmlsZS5zdG9wKCk7XG4gIH1cbiAgY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIgPSBzb25nTnVtYmVyO1xuICBjdXJyZW50U29uZ0Zyb21BbGJ1bSA9IGN1cnJlbnRBbGJ1bS5zb25nc1tzb25nTnVtYmVyIC0gMV07XG5cbiAgY3VycmVudFNvbmdGaWxlID0gbmV3IGJ1enouc291bmQoY3VycmVudFNvbmdGcm9tQWxidW0uYXVkaW9VcmwsIHtcbiAgICBmb3JtYXRzOiBbXCJtcDNcIl0sXG4gICAgcHJlbG9hZDogdHJ1ZVxuICB9KTtcblxuICBzZXRWb2x1bWUoY3VycmVudFZvbHVtZSk7XG5cbiAgJChcIi5jdXJyZW50bHktcGxheWluZyAuc29uZy1uYW1lXCIpLnRleHQoY3VycmVudFNvbmdGcm9tQWxidW0udGl0bGUpO1xuICAkKFwiLmN1cnJlbnRseS1wbGF5aW5nIC5hcnRpc3QtbmFtZVwiKS50ZXh0KGN1cnJlbnRTb25nRnJvbUFsYnVtLmFydGlzdCk7XG4gICQoXCIuY3VycmVudGx5LXBsYXlpbmcgLmFydGlzdC1zb25nLW1vYmlsZVwiKS50ZXh0KGN1cnJlbnRTb25nRnJvbUFsYnVtLnRpdGxlICsgXCIgLSBcIiArIGN1cnJlbnRBbGJ1bS50aXRsZSk7XG5cbiAgJHBsYXlQYXVzZVRvZ2dsZS5odG1sKHBsYXllckJhclBhdXNlQnV0dG9uKTtcbn07XG5cbnZhciBzZXRWb2x1bWUgPSBmdW5jdGlvbih2b2x1bWUpe1xuICBpZihjdXJyZW50U29uZ0ZpbGUpe1xuICAgIGN1cnJlbnRTb25nRmlsZS5zZXRWb2x1bWUodm9sdW1lKTtcbiAgfVxufTtcblxudmFyIHNldHVwU2Vla0JhcnMgPSBmdW5jdGlvbigpe1xuICB2YXIgJHNlZWtCYXJzID0gJChcIi5wbGF5ZXItYmFyIC5zZWVrLWJhclwiKTtcblxuICAkc2Vla0JhcnMuY2xpY2soZnVuY3Rpb24oZXZlbnQpe1xuXG4gICAgdmFyIG9mZnNldFggPSBldmVudC5wYWdlWCAtICQodGhpcykub2Zmc2V0KCkubGVmdDtcbiAgICB2YXIgYmFyV2lkdGggPSAkKHRoaXMpLndpZHRoKCk7XG5cbiAgICB2YXIgc2Vla0JhckZpbGxSYXRpbyA9IG9mZnNldFggLyBiYXJXaWR0aDtcblxuICAgIGlmKCQodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoXCJ2b2x1bWVcIikpe1xuICAgICAgc2V0Vm9sdW1lKHNlZWtCYXJGaWxsUmF0aW8gKiAxMDApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWVrKHNlZWtCYXJGaWxsUmF0aW8gKiBjdXJyZW50U29uZ0ZpbGUuZ2V0RHVyYXRpb24oKSk7XG4gICAgfVxuXG4gICAgdXBkYXRlU2Vla1BlcmNlbnRhZ2UoJCh0aGlzKSwgc2Vla0JhckZpbGxSYXRpbyk7XG4gIH0pO1xuXG4gICRzZWVrQmFycy5maW5kKFwiLnRodW1iXCIpLm1vdXNlZG93bihmdW5jdGlvbihldmVudCl7XG4gICAgdmFyICRjdXJyZW50U2Vla0JhciA9ICQodGhpcykucGFyZW50KCk7XG5cbiAgICAkKGRvY3VtZW50KS5iaW5kKFwibW91c2Vtb3ZlLnRodW1iXCIsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgIHZhciBvZmZzZXRYID0gZXZlbnQucGFnZVggLSAkY3VycmVudFNlZWtCYXIub2Zmc2V0KCkubGVmdDtcbiAgICAgIHZhciBiYXJXaWR0aCA9ICRjdXJyZW50U2Vla0Jhci53aWR0aCgpO1xuICAgICAgdmFyIHNlZWtCYXJGaWxsUmF0aW8gPSBvZmZzZXRYIC8gYmFyV2lkdGg7XG5cbiAgICAgIGlmKCQodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoXCJ2b2x1bWVcIikpe1xuICAgICAgICBzZXRWb2x1bWUoc2Vla0JhckZpbGxSYXRpbyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWVrKHNlZWtCYXJGaWxsUmF0aW8gKiBjdXJyZW50U29uZ0ZpbGUuZ2V0RHVyYXRpb24oKSk7XG4gICAgICB9ICAgICAgXG5cbiAgICAgIHVwZGF0ZVNlZWtQZXJjZW50YWdlKCRjdXJyZW50U2Vla0Jhciwgc2Vla0JhckZpbGxSYXRpbyk7XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5iaW5kKFwibW91c2V1cC50aHVtYlwiLCBmdW5jdGlvbigpe1xuICAgICAgJChkb2N1bWVudCkudW5iaW5kKFwibW91c2Vtb3ZlLnRodW1iXCIpO1xuICAgICAgJChkb2N1bWVudCkudW5iaW5kKFwibW91c2V1cC50aHVtYlwiKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG52YXIgdG9nZ2xlUGxheUZyb21QbGF5ZXJCYXIgPSBmdW5jdGlvbigpIHtcbiAgaWYoY3VycmVudFNvbmdGaWxlLmlzUGF1c2VkKCkpe1xuICAgICRwbGF5UGF1c2VUb2dnbGUuaHRtbChwbGF5ZXJCYXJQYXVzZUJ1dHRvbik7XG4gICAgZ2V0U29uZ051bWJlckNvbnRhaW5lcihjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlcikuaHRtbChwYXVzZUJ1dHRvblRlbXBsYXRlKTtcbiAgICBjdXJyZW50U29uZ0ZpbGUucGxheSgpO1xuICB9IGVsc2Uge1xuICAgICRwbGF5UGF1c2VUb2dnbGUuaHRtbChwbGF5ZXJCYXJQbGF5QnV0dG9uKTtcbiAgICBnZXRTb25nTnVtYmVyQ29udGFpbmVyKGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyKS5odG1sKGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyKTtcbiAgICBjdXJyZW50U29uZ0ZpbGUucGF1c2UoKTtcbiAgfVxufTtcblxudmFyIHRyYWNrSW5kZXggPSBmdW5jdGlvbihhbGJ1bSwgc29uZyl7XG4gIHJldHVybiBhbGJ1bS5zb25ncy5pbmRleE9mKHNvbmcpO1xufTtcblxudmFyIHVwZGF0ZVBsYXllckJhclNvbmcgPSBmdW5jdGlvbigpe1xuICAkcGxheVBhdXNlVG9nZ2xlLmh0bWwocGxheWVyQmFyUGF1c2VCdXR0b24pO1xufTtcblxudmFyIHVwZGF0ZVNlZWtCYXJXaGlsZVNvbmdQbGF5cyA9IGZ1bmN0aW9uKCl7XG4gIGlmKGN1cnJlbnRTb25nRmlsZSl7XG4gICAgY3VycmVudFNvbmdGaWxlLmJpbmQoXCJ0aW1ldXBkYXRlXCIsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgIHZhciBzZWVrQmFyRmlsbFJhdGlvID0gdGhpcy5nZXRUaW1lKCkgLyB0aGlzLmdldER1cmF0aW9uKCk7XG4gICAgICB2YXIgJHNlZWtCYXIgPSAkKFwiLnNlZWstY29udHJvbCAuc2Vlay1iYXJcIik7XG4gICAgICB1cGRhdGVTZWVrUGVyY2VudGFnZSgkc2Vla0Jhciwgc2Vla0JhckZpbGxSYXRpbyk7XG4gICAgfSk7XG4gIH1cbn07XG5cbnZhciB1cGRhdGVTZWVrUGVyY2VudGFnZSA9IGZ1bmN0aW9uKCRzZWVrQmFyLCBzZWVrQmFyRmlsbFJhdGlvKXtcbiAgdmFyIG9mZnNldFhQZXJjZW50ID0gc2Vla0JhckZpbGxSYXRpbyAqIDEwMDtcbiAgb2Zmc2V0WFBlcmNlbnQgPSBNYXRoLm1heCgwLCBvZmZzZXRYUGVyY2VudCk7XG4gIG9mZnNldFhQZXJjZW50ID0gTWF0aC5taW4oMTAwLCBvZmZzZXRYUGVyY2VudCk7XG5cbiAgdmFyIHBlcmNlbnRhZ2VTdHJpbmcgPSBvZmZzZXRYUGVyY2VudCArIFwiJVwiO1xuICAkc2Vla0Jhci5maW5kKFwiLmZpbGxcIikud2lkdGgocGVyY2VudGFnZVN0cmluZyk7XG4gICRzZWVrQmFyLmZpbmQoXCIudGh1bWJcIikuY3NzKHtsZWZ0OiBwZXJjZW50YWdlU3RyaW5nfSk7XG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHsgXG4gIHNldEN1cnJlbnRBbGJ1bShhbGJ1bVBpY2Fzc28pO1xuICBzZXR1cFNlZWtCYXJzKCk7XG4gICRwcmV2aW91c0J1dHRvbi5jbGljayhwcmV2aW91c1NvbmcpO1xuICAkbmV4dEJ1dHRvbi5jbGljayhuZXh0U29uZyk7XG4gICRwbGF5UGF1c2VUb2dnbGUuY2xpY2sodG9nZ2xlUGxheUZyb21QbGF5ZXJCYXIpO1xuICB2YXIgYWxidW1Db3ZlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxidW0tY292ZXJcIik7IFxufSk7XG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
