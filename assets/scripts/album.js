var currentAlbum=null,currentlyPlayingSongNumber=null,currentSongFromAlbum=null,$previousButton=$(".main-controls .previous"),$nextButton=$(".main-controls .next"),albumList=[albumPicasso,albumMarconi,albumPurpleRain],counter=0,playButtonTemplate="<a class='album-song-button'><span class='ion-play'></span></a>",pauseButtonTemplate="<a class='album-song-button'><span class='ion-pause'></span></a>",playerBarPlayButton="<span class='ion-play'></span>",playerBarPauseButton="<span class='ion-pause'></span>",createSongRow=function(n,t,e){var r="<tr class='album-view-song-item'>  <td class='song-item-number' data-song-number='"+n+"'>"+n+"</td>  <td class='song-item-title'>"+t+"</td>  <td class='song-item-duration'>"+e+"</td></tr>",u=$(r),a=function(){var n=$(this).attr("data-song-number");if(null!==currentlyPlayingSongNumber){var t=getSongNumberContainer(currentlyPlayingSongNumber);t.html(currentlyPlayingSongNumber)}currentlyPlayingSongNumber!==n?($(this).html(pauseButtonTemplate),setSong(n),updatePlayerBarSong()):currentlyPlayingSongNumber===n&&($(this).html(playButtonTemplate),currentlyPlayingSongNumber=null,currentSongFromAlbum=null)},l=function(n){var t=$(this).find(".song-item-number"),e=t.attr("data-song-number");e!==currentlyPlayingSongNumber&&t.html(playButtonTemplate)},o=function(n){var t=$(this).find(".song-item-number"),e=t.attr("data-song-number");e!==currentlyPlayingSongNumber&&t.html(e)};return u.find(".song-item-number").click(a),u.hover(l,o),u},setCurrentAlbum=function(n){currentAlbum=n;var t=$(".album-view-title"),e=$(".album-view-artist"),r=$(".album-view-release-info"),u=$(".album-cover-art"),a=$(".album-view-song-list");t.text(n.title),e.text(n.artist),r.text(n.year+" "+n.label),u.attr("src",n.albumArtUrl),a.empty();for(var l=0;l<n.songs.length;l++){var o=createSongRow(l+1,n.songs[l].title,n.songs[l].duration);a.append(o)}},updatePlayerBarSong=function(){$(".main-controls .play-pause").html(playerBarPauseButton)},trackIndex=function(n,t){return n.songs.indexOf(t)},nextSong=function(){var n=function(n){return 0===n?currentAlbum.songs.length:n},t=trackIndex(currentAlbum,currentSongFromAlbum);t++,t>=currentAlbum.songs.length&&(t=0),setSong(t+1);var e=n(t),r=getSongNumberContainer(currentlyPlayingSongNumber),u=getSongNumberContainer(e);r.html(pauseButtonTemplate),u.html(e)},previousSong=function(){var n=function(n){return n==currentAlbum.songs.length-1?1:n+2},t=trackIndex(currentAlbum,currentSongFromAlbum);t--,t<0&&(t=currentAlbum.songs.length-1),setSong(t+1);var e=n(t),r=getSongNumberContainer(currentlyPlayingSongNumber),u=getSongNumberContainer(e);r.html(pauseButtonTemplate),u.html(e)},setSong=function(n){currentlyPlayingSongNumber=n,currentSongFromAlbum=currentAlbum.songs[n-1],$(".currently-playing .song-name").text(currentSongFromAlbum.title),$(".currently-playing .artist-name").text(currentSongFromAlbum.artist),$(".currently-playing .artist-song-mobile").text(currentSongFromAlbum.title+" - "+currentAlbum.title),$(".main-controls .play-pause").html(playerBarPauseButton)},getSongNumberContainer=function(n){return $(".song-item-number[data-song-number='"+n+"']")};$(document).ready(function(){setCurrentAlbum(albumPicasso),$previousButton.click(previousSong),$nextButton.click(nextSong);document.getElementById("album-cover")});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsYnVtLmpzIl0sIm5hbWVzIjpbImN1cnJlbnRBbGJ1bSIsImN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyIiwiY3VycmVudFNvbmdGcm9tQWxidW0iLCIkcHJldmlvdXNCdXR0b24iLCIkIiwiJG5leHRCdXR0b24iLCJhbGJ1bUxpc3QiLCJhbGJ1bVBpY2Fzc28iLCJhbGJ1bU1hcmNvbmkiLCJhbGJ1bVB1cnBsZVJhaW4iLCJjb3VudGVyIiwicGxheUJ1dHRvblRlbXBsYXRlIiwicGF1c2VCdXR0b25UZW1wbGF0ZSIsInBsYXllckJhclBsYXlCdXR0b24iLCJwbGF5ZXJCYXJQYXVzZUJ1dHRvbiIsImNyZWF0ZVNvbmdSb3ciLCJzb25nTnVtYmVyIiwic29uZ05hbWUiLCJzb25nTGVuZ3RoIiwidGVtcGxhdGUiLCIkcm93IiwiY2xpY2tIYW5kbGVyIiwidGhpcyIsImF0dHIiLCJjdXJyZW50bHlQbGF5aW5nQ29udGFpbmVyIiwiZ2V0U29uZ051bWJlckNvbnRhaW5lciIsImh0bWwiLCJzZXRTb25nIiwidXBkYXRlUGxheWVyQmFyU29uZyIsIm9uSG92ZXIiLCJldmVudCIsInNvbmdOdW1iZXJDb250YWluZXIiLCJmaW5kIiwib2ZmSG92ZXIiLCJjbGljayIsImhvdmVyIiwic2V0Q3VycmVudEFsYnVtIiwiYWxidW0iLCIkYWxidW1UaXRsZSIsIiRhbGJ1bUFydGlzdCIsIiRhbGJ1bVJlbGVhc2VJbmZvIiwiJGFsYnVtSW1hZ2UiLCIkYWxidW1Tb25nTGlzdCIsInRleHQiLCJ0aXRsZSIsImFydGlzdCIsInllYXIiLCJsYWJlbCIsImFsYnVtQXJ0VXJsIiwiZW1wdHkiLCJpIiwic29uZ3MiLCJsZW5ndGgiLCIkbmV3Um93IiwiZHVyYXRpb24iLCJhcHBlbmQiLCJ0cmFja0luZGV4Iiwic29uZyIsImluZGV4T2YiLCJuZXh0U29uZyIsImdldExhc3RTb25nTnVtYmVyIiwiaW5kZXgiLCJjdXJyZW50U29uZ0luZGV4IiwibGFzdFNvbmdOdW1iZXIiLCIkbmV4dFNvbmdOdW1iZXJDZWxsIiwiJGxhc3RTb25nTnVtYmVyQ2VsbCIsInByZXZpb3VzU29uZyIsIiRwcmV2aW91c1NvbmdOdW1iZXJDZWxsIiwibnVtYmVyIiwiZG9jdW1lbnQiLCJyZWFkeSIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiQUFFQSxHQUFJQSxjQUFlLEtBQ2ZDLDJCQUE2QixLQUM3QkMscUJBQXVCLEtBRXZCQyxnQkFBa0JDLEVBQUUsNEJBQ3BCQyxZQUFjRCxFQUFFLHdCQUVoQkUsV0FBYUMsYUFBY0MsYUFBY0MsaUJBQ3pDQyxRQUFVLEVBQ1ZDLG1CQUFxQixrRUFDckJDLG9CQUFzQixtRUFDdEJDLG9CQUFzQixpQ0FDdEJDLHFCQUF1QixrQ0FHdkJDLGNBQWdCLFNBQVNDLEVBQVlDLEVBQVVDLEdBQ2pELEdBQUlDLEdBQ0EscUZBQ3NESCxFQUFhLEtBQU9BLEVBQWEsc0NBQ3BEQyxFQUFXLHlDQUNSQyxFQUFhLGFBR25ERSxFQUFPaEIsRUFBRWUsR0FFVEUsRUFBZSxXQUNqQixHQUFJTCxHQUFhWixFQUFFa0IsTUFBTUMsS0FBSyxtQkFFOUIsSUFBa0MsT0FBL0J0QiwyQkFBb0MsQ0FDckMsR0FBSXVCLEdBQTRCQyx1QkFBdUJ4QiwyQkFDdkR1QixHQUEwQkUsS0FBS3pCLDRCQUU5QkEsNkJBQStCZSxHQUNoQ1osRUFBRWtCLE1BQU1JLEtBQUtkLHFCQUNiZSxRQUFRWCxHQUNSWSx1QkFDUzNCLDZCQUErQmUsSUFDeENaLEVBQUVrQixNQUFNSSxLQUFLZixvQkFDYlYsMkJBQTZCLEtBQzdCQyxxQkFBdUIsT0FLdkIyQixFQUFVLFNBQVNDLEdBQ3JCLEdBQUlDLEdBQXNCM0IsRUFBRWtCLE1BQU1VLEtBQUsscUJBQ25DaEIsRUFBYWUsRUFBb0JSLEtBQUssbUJBRXZDUCxLQUFlZiw0QkFDaEI4QixFQUFvQkwsS0FBS2YscUJBSXpCc0IsRUFBVyxTQUFTSCxHQUN0QixHQUFJQyxHQUFzQjNCLEVBQUVrQixNQUFNVSxLQUFLLHFCQUNuQ2hCLEVBQWFlLEVBQW9CUixLQUFLLG1CQUV2Q1AsS0FBZWYsNEJBQ2hCOEIsRUFBb0JMLEtBQUtWLEdBTTdCLE9BRkFJLEdBQUtZLEtBQUsscUJBQXFCRSxNQUFNYixHQUNyQ0QsRUFBS2UsTUFBTU4sRUFBU0ksR0FDYmIsR0FHTGdCLGdCQUFrQixTQUFTQyxHQUM3QnJDLGFBQWVxQyxDQUVmLElBQUlDLEdBQWNsQyxFQUFFLHFCQUNoQm1DLEVBQWVuQyxFQUFFLHNCQUNqQm9DLEVBQW9CcEMsRUFBRSw0QkFDdEJxQyxFQUFjckMsRUFBRSxvQkFDaEJzQyxFQUFpQnRDLEVBQUUsd0JBRXZCa0MsR0FBWUssS0FBS04sRUFBTU8sT0FDdkJMLEVBQWFJLEtBQUtOLEVBQU1RLFFBQ3hCTCxFQUFrQkcsS0FBS04sRUFBTVMsS0FBTyxJQUFNVCxFQUFNVSxPQUNoRE4sRUFBWWxCLEtBQUssTUFBT2MsRUFBTVcsYUFFOUJOLEVBQWVPLE9BRWYsS0FBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUliLEVBQU1jLE1BQU1DLE9BQVFGLElBQUssQ0FDM0MsR0FBSUcsR0FBVXRDLGNBQWNtQyxFQUFJLEVBQUdiLEVBQU1jLE1BQU1ELEdBQUdOLE1BQU9QLEVBQU1jLE1BQU1ELEdBQUdJLFNBQ3hFWixHQUFlYSxPQUFPRixLQUl0QnpCLG9CQUFzQixXQUN4QnhCLEVBQUUsOEJBQThCc0IsS0FBS1osdUJBR25DMEMsV0FBYSxTQUFTbkIsRUFBT29CLEdBQy9CLE1BQU9wQixHQUFNYyxNQUFNTyxRQUFRRCxJQUd6QkUsU0FBVyxXQUNiLEdBQUlDLEdBQW9CLFNBQVNDLEdBQy9CLE1BQWlCLEtBQVZBLEVBQWM3RCxhQUFhbUQsTUFBTUMsT0FBU1MsR0FHL0NDLEVBQW1CTixXQUFXeEQsYUFBY0UscUJBQ2hENEQsS0FFR0EsR0FBb0I5RCxhQUFhbUQsTUFBTUMsU0FDeENVLEVBQW1CLEdBR3JCbkMsUUFBUW1DLEVBQW1CLEVBRTNCLElBQUlDLEdBQWlCSCxFQUFrQkUsR0FDbkNFLEVBQXNCdkMsdUJBQXVCeEIsNEJBQzdDZ0UsRUFBc0J4Qyx1QkFBdUJzQyxFQUVqREMsR0FBb0J0QyxLQUFLZCxxQkFDekJxRCxFQUFvQnZDLEtBQUtxQyxJQUd2QkcsYUFBZSxXQUNqQixHQUFJTixHQUFvQixTQUFTQyxHQUMvQixNQUFPQSxJQUFVN0QsYUFBYW1ELE1BQU1DLE9BQVMsRUFBSyxFQUFJUyxFQUFRLEdBRzVEQyxFQUFtQk4sV0FBV3hELGFBQWNFLHFCQUNoRDRELEtBRUdBLEVBQW1CLElBQ3BCQSxFQUFtQjlELGFBQWFtRCxNQUFNQyxPQUFTLEdBR2pEekIsUUFBUW1DLEVBQW1CLEVBRTNCLElBQUlDLEdBQWlCSCxFQUFrQkUsR0FDbkNLLEVBQTBCMUMsdUJBQXVCeEIsNEJBQ2pEZ0UsRUFBc0J4Qyx1QkFBdUJzQyxFQUVqREksR0FBd0J6QyxLQUFLZCxxQkFDN0JxRCxFQUFvQnZDLEtBQUtxQyxJQUd2QnBDLFFBQVUsU0FBU1gsR0FDckJmLDJCQUE2QmUsRUFDN0JkLHFCQUF1QkYsYUFBYW1ELE1BQU1uQyxFQUFhLEdBRXZEWixFQUFFLGlDQUFpQ3VDLEtBQUt6QyxxQkFBcUIwQyxPQUM3RHhDLEVBQUUsbUNBQW1DdUMsS0FBS3pDLHFCQUFxQjJDLFFBQy9EekMsRUFBRSwwQ0FBMEN1QyxLQUFLekMscUJBQXFCMEMsTUFBUSxNQUFRNUMsYUFBYTRDLE9BRW5HeEMsRUFBRSw4QkFBOEJzQixLQUFLWix1QkFHbkNXLHVCQUF5QixTQUFTMkMsR0FDcEMsTUFBT2hFLEdBQUUsdUNBQXlDZ0UsRUFBUyxNQUc3RGhFLEdBQUVpRSxVQUFVQyxNQUFNLFdBQ2hCbEMsZ0JBQWdCN0IsY0FDaEJKLGdCQUFnQitCLE1BQU1nQyxjQUN0QjdELFlBQVk2QixNQUFNeUIsU0FDRFUsVUFBU0UsZUFBZSIsImZpbGUiOiJhbGJ1bS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qZ2xvYmFsICQgYWxidW1QaWNhc3NvIGFsYnVtTWFyY29uaSBhbGJ1bVB1cnBsZVJhaW4gOnRydWUqL1xuXG52YXIgY3VycmVudEFsYnVtID0gbnVsbDtcbnZhciBjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlciA9IG51bGw7XG52YXIgY3VycmVudFNvbmdGcm9tQWxidW0gPSBudWxsO1xuXG52YXIgJHByZXZpb3VzQnV0dG9uID0gJChcIi5tYWluLWNvbnRyb2xzIC5wcmV2aW91c1wiKTtcbnZhciAkbmV4dEJ1dHRvbiA9ICQoXCIubWFpbi1jb250cm9scyAubmV4dFwiKTtcblxudmFyIGFsYnVtTGlzdCA9IFthbGJ1bVBpY2Fzc28sIGFsYnVtTWFyY29uaSwgYWxidW1QdXJwbGVSYWluXTtcbnZhciBjb3VudGVyID0gMDtcbnZhciBwbGF5QnV0dG9uVGVtcGxhdGUgPSBcIjxhIGNsYXNzPSdhbGJ1bS1zb25nLWJ1dHRvbic+PHNwYW4gY2xhc3M9J2lvbi1wbGF5Jz48L3NwYW4+PC9hPlwiO1xudmFyIHBhdXNlQnV0dG9uVGVtcGxhdGUgPSBcIjxhIGNsYXNzPSdhbGJ1bS1zb25nLWJ1dHRvbic+PHNwYW4gY2xhc3M9J2lvbi1wYXVzZSc+PC9zcGFuPjwvYT5cIjtcbnZhciBwbGF5ZXJCYXJQbGF5QnV0dG9uID0gXCI8c3BhbiBjbGFzcz0naW9uLXBsYXknPjwvc3Bhbj5cIjtcbnZhciBwbGF5ZXJCYXJQYXVzZUJ1dHRvbiA9IFwiPHNwYW4gY2xhc3M9J2lvbi1wYXVzZSc+PC9zcGFuPlwiO1xuXG5cbnZhciBjcmVhdGVTb25nUm93ID0gZnVuY3Rpb24oc29uZ051bWJlciwgc29uZ05hbWUsIHNvbmdMZW5ndGgpe1xuICB2YXIgdGVtcGxhdGUgPSBcbiAgICAgIFwiPHRyIGNsYXNzPSdhbGJ1bS12aWV3LXNvbmctaXRlbSc+XCIgKyBcbiAgICAgIFwiICA8dGQgY2xhc3M9J3NvbmctaXRlbS1udW1iZXInIGRhdGEtc29uZy1udW1iZXI9J1wiICsgc29uZ051bWJlciArIFwiJz5cIiArIHNvbmdOdW1iZXIgKyBcIjwvdGQ+XCIgKyBcbiAgICAgIFwiICA8dGQgY2xhc3M9J3NvbmctaXRlbS10aXRsZSc+XCIgKyBzb25nTmFtZSArIFwiPC90ZD5cIiArIFxuICAgICAgXCIgIDx0ZCBjbGFzcz0nc29uZy1pdGVtLWR1cmF0aW9uJz5cIiArIHNvbmdMZW5ndGggKyBcIjwvdGQ+XCIgKyBcbiAgICAgIFwiPC90cj5cIjtcblxuICB2YXIgJHJvdyA9ICQodGVtcGxhdGUpO1xuXG4gIHZhciBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzb25nTnVtYmVyID0gJCh0aGlzKS5hdHRyKFwiZGF0YS1zb25nLW51bWJlclwiKTtcblxuICAgIGlmKGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyICE9PSBudWxsKXtcbiAgICAgIHZhciBjdXJyZW50bHlQbGF5aW5nQ29udGFpbmVyID0gZ2V0U29uZ051bWJlckNvbnRhaW5lcihjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlcik7XG4gICAgICBjdXJyZW50bHlQbGF5aW5nQ29udGFpbmVyLmh0bWwoY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIpO1xuICAgIH1cbiAgICBpZihjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlciAhPT0gc29uZ051bWJlcil7XG4gICAgICAkKHRoaXMpLmh0bWwocGF1c2VCdXR0b25UZW1wbGF0ZSk7XG4gICAgICBzZXRTb25nKHNvbmdOdW1iZXIpO1xuICAgICAgdXBkYXRlUGxheWVyQmFyU29uZygpO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIgPT09IHNvbmdOdW1iZXIpe1xuICAgICAgJCh0aGlzKS5odG1sKHBsYXlCdXR0b25UZW1wbGF0ZSk7XG4gICAgICBjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlciA9IG51bGw7XG4gICAgICBjdXJyZW50U29uZ0Zyb21BbGJ1bSA9IG51bGw7XG4gICAgfVxuXG4gIH07XG5cbiAgdmFyIG9uSG92ZXIgPSBmdW5jdGlvbihldmVudCl7XG4gICAgdmFyIHNvbmdOdW1iZXJDb250YWluZXIgPSAkKHRoaXMpLmZpbmQoXCIuc29uZy1pdGVtLW51bWJlclwiKTtcbiAgICB2YXIgc29uZ051bWJlciA9IHNvbmdOdW1iZXJDb250YWluZXIuYXR0cihcImRhdGEtc29uZy1udW1iZXJcIik7XG5cbiAgICBpZihzb25nTnVtYmVyICE9PSBjdXJyZW50bHlQbGF5aW5nU29uZ051bWJlcil7XG4gICAgICBzb25nTnVtYmVyQ29udGFpbmVyLmh0bWwocGxheUJ1dHRvblRlbXBsYXRlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIG9mZkhvdmVyID0gZnVuY3Rpb24oZXZlbnQpe1xuICAgIHZhciBzb25nTnVtYmVyQ29udGFpbmVyID0gJCh0aGlzKS5maW5kKFwiLnNvbmctaXRlbS1udW1iZXJcIik7XG4gICAgdmFyIHNvbmdOdW1iZXIgPSBzb25nTnVtYmVyQ29udGFpbmVyLmF0dHIoXCJkYXRhLXNvbmctbnVtYmVyXCIpO1xuXG4gICAgaWYoc29uZ051bWJlciAhPT0gY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIpe1xuICAgICAgc29uZ051bWJlckNvbnRhaW5lci5odG1sKHNvbmdOdW1iZXIpO1xuICAgIH1cbiAgfTtcblxuICAkcm93LmZpbmQoXCIuc29uZy1pdGVtLW51bWJlclwiKS5jbGljayhjbGlja0hhbmRsZXIpO1xuICAkcm93LmhvdmVyKG9uSG92ZXIsIG9mZkhvdmVyKTtcbiAgcmV0dXJuICRyb3c7XG59O1xuXG52YXIgc2V0Q3VycmVudEFsYnVtID0gZnVuY3Rpb24oYWxidW0pIHtcbiAgY3VycmVudEFsYnVtID0gYWxidW07XG5cbiAgdmFyICRhbGJ1bVRpdGxlID0gJChcIi5hbGJ1bS12aWV3LXRpdGxlXCIpO1xuICB2YXIgJGFsYnVtQXJ0aXN0ID0gJChcIi5hbGJ1bS12aWV3LWFydGlzdFwiKTtcbiAgdmFyICRhbGJ1bVJlbGVhc2VJbmZvID0gJChcIi5hbGJ1bS12aWV3LXJlbGVhc2UtaW5mb1wiKTtcbiAgdmFyICRhbGJ1bUltYWdlID0gJChcIi5hbGJ1bS1jb3Zlci1hcnRcIik7XG4gIHZhciAkYWxidW1Tb25nTGlzdCA9ICQoXCIuYWxidW0tdmlldy1zb25nLWxpc3RcIik7XG5cbiAgJGFsYnVtVGl0bGUudGV4dChhbGJ1bS50aXRsZSk7XG4gICRhbGJ1bUFydGlzdC50ZXh0KGFsYnVtLmFydGlzdCk7XG4gICRhbGJ1bVJlbGVhc2VJbmZvLnRleHQoYWxidW0ueWVhciArIFwiIFwiICsgYWxidW0ubGFiZWwpO1xuICAkYWxidW1JbWFnZS5hdHRyKFwic3JjXCIsIGFsYnVtLmFsYnVtQXJ0VXJsKTtcblxuICAkYWxidW1Tb25nTGlzdC5lbXB0eSgpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYWxidW0uc29uZ3MubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgJG5ld1JvdyA9IGNyZWF0ZVNvbmdSb3coaSArIDEsIGFsYnVtLnNvbmdzW2ldLnRpdGxlLCBhbGJ1bS5zb25nc1tpXS5kdXJhdGlvbik7XG4gICAgJGFsYnVtU29uZ0xpc3QuYXBwZW5kKCRuZXdSb3cpO1xuICB9XG59O1xuXG52YXIgdXBkYXRlUGxheWVyQmFyU29uZyA9IGZ1bmN0aW9uKCl7XG4gICQoXCIubWFpbi1jb250cm9scyAucGxheS1wYXVzZVwiKS5odG1sKHBsYXllckJhclBhdXNlQnV0dG9uKTtcbn07XG5cbnZhciB0cmFja0luZGV4ID0gZnVuY3Rpb24oYWxidW0sIHNvbmcpe1xuICByZXR1cm4gYWxidW0uc29uZ3MuaW5kZXhPZihzb25nKTtcbn07XG5cbnZhciBuZXh0U29uZyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBnZXRMYXN0U29uZ051bWJlciA9IGZ1bmN0aW9uKGluZGV4KXtcbiAgICByZXR1cm4gaW5kZXggPT09IDAgPyBjdXJyZW50QWxidW0uc29uZ3MubGVuZ3RoIDogaW5kZXg7XG4gIH07XG5cbiAgdmFyIGN1cnJlbnRTb25nSW5kZXggPSB0cmFja0luZGV4KGN1cnJlbnRBbGJ1bSwgY3VycmVudFNvbmdGcm9tQWxidW0pO1xuICBjdXJyZW50U29uZ0luZGV4Kys7XG5cbiAgaWYoY3VycmVudFNvbmdJbmRleCA+PSBjdXJyZW50QWxidW0uc29uZ3MubGVuZ3RoKXtcbiAgICBjdXJyZW50U29uZ0luZGV4ID0gMDtcbiAgfVxuXG4gIHNldFNvbmcoY3VycmVudFNvbmdJbmRleCArIDEpO1xuXG4gIHZhciBsYXN0U29uZ051bWJlciA9IGdldExhc3RTb25nTnVtYmVyKGN1cnJlbnRTb25nSW5kZXgpO1xuICB2YXIgJG5leHRTb25nTnVtYmVyQ2VsbCA9IGdldFNvbmdOdW1iZXJDb250YWluZXIoY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIpO1xuICB2YXIgJGxhc3RTb25nTnVtYmVyQ2VsbCA9IGdldFNvbmdOdW1iZXJDb250YWluZXIobGFzdFNvbmdOdW1iZXIpO1xuXG4gICRuZXh0U29uZ051bWJlckNlbGwuaHRtbChwYXVzZUJ1dHRvblRlbXBsYXRlKTtcbiAgJGxhc3RTb25nTnVtYmVyQ2VsbC5odG1sKGxhc3RTb25nTnVtYmVyKTtcbn07XG5cbnZhciBwcmV2aW91c1NvbmcgPSBmdW5jdGlvbigpe1xuICB2YXIgZ2V0TGFzdFNvbmdOdW1iZXIgPSBmdW5jdGlvbihpbmRleCl7XG4gICAgcmV0dXJuIGluZGV4ID09IChjdXJyZW50QWxidW0uc29uZ3MubGVuZ3RoIC0gMSkgPyAxIDogaW5kZXggKyAyO1xuICB9O1xuXG4gIHZhciBjdXJyZW50U29uZ0luZGV4ID0gdHJhY2tJbmRleChjdXJyZW50QWxidW0sIGN1cnJlbnRTb25nRnJvbUFsYnVtKTtcbiAgY3VycmVudFNvbmdJbmRleC0tO1xuXG4gIGlmKGN1cnJlbnRTb25nSW5kZXggPCAwKSB7XG4gICAgY3VycmVudFNvbmdJbmRleCA9IGN1cnJlbnRBbGJ1bS5zb25ncy5sZW5ndGggLSAxO1xuICB9XG5cbiAgc2V0U29uZyhjdXJyZW50U29uZ0luZGV4ICsgMSk7XG5cbiAgdmFyIGxhc3RTb25nTnVtYmVyID0gZ2V0TGFzdFNvbmdOdW1iZXIoY3VycmVudFNvbmdJbmRleCk7XG4gIHZhciAkcHJldmlvdXNTb25nTnVtYmVyQ2VsbCA9IGdldFNvbmdOdW1iZXJDb250YWluZXIoY3VycmVudGx5UGxheWluZ1NvbmdOdW1iZXIpO1xuICB2YXIgJGxhc3RTb25nTnVtYmVyQ2VsbCA9IGdldFNvbmdOdW1iZXJDb250YWluZXIobGFzdFNvbmdOdW1iZXIpO1xuXG4gICRwcmV2aW91c1NvbmdOdW1iZXJDZWxsLmh0bWwocGF1c2VCdXR0b25UZW1wbGF0ZSk7XG4gICRsYXN0U29uZ051bWJlckNlbGwuaHRtbChsYXN0U29uZ051bWJlcik7ICBcbn07XG5cbnZhciBzZXRTb25nID0gZnVuY3Rpb24oc29uZ051bWJlcil7XG4gIGN1cnJlbnRseVBsYXlpbmdTb25nTnVtYmVyID0gc29uZ051bWJlcjtcbiAgY3VycmVudFNvbmdGcm9tQWxidW0gPSBjdXJyZW50QWxidW0uc29uZ3Nbc29uZ051bWJlciAtIDFdO1xuXG4gICQoXCIuY3VycmVudGx5LXBsYXlpbmcgLnNvbmctbmFtZVwiKS50ZXh0KGN1cnJlbnRTb25nRnJvbUFsYnVtLnRpdGxlKTtcbiAgJChcIi5jdXJyZW50bHktcGxheWluZyAuYXJ0aXN0LW5hbWVcIikudGV4dChjdXJyZW50U29uZ0Zyb21BbGJ1bS5hcnRpc3QpO1xuICAkKFwiLmN1cnJlbnRseS1wbGF5aW5nIC5hcnRpc3Qtc29uZy1tb2JpbGVcIikudGV4dChjdXJyZW50U29uZ0Zyb21BbGJ1bS50aXRsZSArIFwiIC0gXCIgKyBjdXJyZW50QWxidW0udGl0bGUpO1xuXG4gICQoXCIubWFpbi1jb250cm9scyAucGxheS1wYXVzZVwiKS5odG1sKHBsYXllckJhclBhdXNlQnV0dG9uKTtcbn07XG5cbnZhciBnZXRTb25nTnVtYmVyQ29udGFpbmVyID0gZnVuY3Rpb24obnVtYmVyKXtcbiAgcmV0dXJuICQoXCIuc29uZy1pdGVtLW51bWJlcltkYXRhLXNvbmctbnVtYmVyPSdcIiArIG51bWJlciArIFwiJ11cIik7XG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHsgXG4gIHNldEN1cnJlbnRBbGJ1bShhbGJ1bVBpY2Fzc28pO1xuICAkcHJldmlvdXNCdXR0b24uY2xpY2socHJldmlvdXNTb25nKTtcbiAgJG5leHRCdXR0b24uY2xpY2sobmV4dFNvbmcpO1xuICB2YXIgYWxidW1Db3ZlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxidW0tY292ZXJcIik7IFxufSk7XG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
